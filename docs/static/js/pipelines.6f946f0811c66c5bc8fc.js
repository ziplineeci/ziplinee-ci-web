"use strict";(self.webpackChunkestafette_ci_web=self.webpackChunkestafette_ci_web||[]).push([[640],{1893:function(e,t,r){r.d(t,{Z:function(){return v}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-link",{staticClass:"row-block list-complete-item",attrs:{to:{name:"PipelineBotLogs",params:{repoSource:e.bot.repoSource,repoOwner:e.bot.repoOwner,repoName:e.bot.repoName,botID:e.bot.id}},tag:"div"}},[e.allBotsMode?r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Pipeline"}},[r("repository-title",{attrs:{repo:e.bot}})],1):e._e(),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Bot",value:e.bot.name}},[e._v("\n    "+e._s(e.bot.name)+"\n  ")]),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Status",value:e.bot.botStatus}},[r("b-progress",[r("b-progress-bar",{attrs:{value:e.$options.filters.releaseProgressBarValue(e.pipeline,e.bot,e.now),label:e.$options.filters.releaseProgressBarLabel(e.pipeline,e.bot,e.now),variant:e.$options.filters.bootstrapVariant(e.bot.botStatus),animated:e.$options.filters.animatedProgressBar(e.bot.botStatus)}})],1)],1),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Executed"}},[e._v("\n    "+e._s(e._f("formatDatetime")(e.bot.insertedAt))+"\n    "),r("duration-label",{attrs:{duration:e.bot.duration,"pending-duration":e.bot.pendingDuration}})],1),e._v(" "),r("property-block",{staticClass:"col-xxxl-4",attrs:{label:"Triggered by"}},[r("triggered-by",{attrs:{events:e.bot.triggerEvents}})],1),e._v(" "),e.showActions?r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Actions"}},[r("cancel-button",{attrs:{bot:e.bot}}),e._v(" "),r("rerun-button",{attrs:{bot:e.bot}})],1):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(5752),a=r(2981),o=r(2874),l=r(6139),c=r(2725),u=r(1033),p=r(5689),d=r(8402),h=r(6546);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={components:{BProgress:n.D,BProgressBar:a.Q,CancelButton:o.Z,RerunButton:l.Z,TriggeredBy:c.Z,PropertyBlock:u.Z,DurationLabel:p.Z,RepositoryTitle:d.Z},props:{bot:{type:Object,default:null},pipeline:{type:Object,default:null},allBotsMode:{type:Boolean,default:!1}},data:function(){return{now:Date.now()}},created:function(){this.updateNow()},methods:{updateNow:function(){this.now=Date.now(),!this.bot||"pending"!==this.bot.botStatus&&"running"!==this.bot.botStatus||h.Z.timeout(this.timeout,this.updateNow,1)}},beforeDestroy:function(){clearTimeout(this.timeout)},computed:m(m({},(0,s.rn)("user",{user:"me"})),{},{showActions:function(){return!this.allBotsMode&&this.user&&this.user.active&&this.bot&&("failed"===this.bot.botStatus||"pending"===this.bot.botStatus||"running"===this.bot.botStatus||"canceled"===this.bot.botStatus||"canceling"===this.bot.botStatus)}})},v=(0,r(1900).Z)(g,i,[],!1,null,null,null).exports},7369:function(e,t,r){r.d(t,{Z:function(){return w}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-link",{staticClass:"row-block list-complete-item",attrs:{to:{name:"PipelineBuildLogs",params:{repoSource:e.build.repoSource,repoOwner:e.build.repoOwner,repoName:e.build.repoName,id:e.build.id}},tag:"div"}},[e.allBuildsMode?r("property-block",{staticClass:"col-xxxl-3",attrs:{label:"Pipeline"}},[r("repository-title",{attrs:{repo:e.build}})],1):e._e(),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Version",value:e.build.buildVersion}}),e._v(" "),r("property-block",{staticClass:"col-xxxl-1",attrs:{label:"Status",value:e.build.buildStatus}},[r("b-progress",[r("b-progress-bar",{attrs:{value:e.$options.filters.buildProgressBarValue(e.pipeline,e.build,e.now),label:e.$options.filters.buildProgressBarLabel(e.pipeline,e.build,e.now),variant:e.$options.filters.bootstrapVariant(e.build.buildStatus),animated:e.$options.filters.animatedProgressBar(e.build.buildStatus)}})],1)],1),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Built at",value:e._f("formatDatetime")(e.build.insertedAt)}},[e._v("\n    "+e._s(e._f("formatDatetime")(e.build.insertedAt))+"\n    "),r("duration-label",{attrs:{duration:e.build.duration,"pending-duration":e.build.pendingDuration}})],1),e._v(" "),r("property-block",{staticClass:"col-xxxl-1",attrs:{label:"Branch",value:e.build.repoBranch}}),e._v(" "),r("property-block",{staticClass:"col-xxxl-1",attrs:{label:"Revision"}},[r("commit-link",{attrs:{build:e.build}})],1),e._v(" "),r("property-block",{class:e.allBuildsMode?"col-xxxl-2":"col-xxxl-3",attrs:{label:"Commit(s)"}},[r("commits",{attrs:{commits:e.build.commits}})],1),e._v(" "),e.showActions?r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Actions","no-truncate":""}},[r("release-button",{attrs:{pipeline:e.pipeline,build:e.build}}),e._v(" "),r("rebuild-button",{attrs:{build:e.build,builds:e.builds}}),e._v(" "),r("cancel-button",{attrs:{build:e.build}})],1):e._e(),e._v(" "),e.showReleases?r("div",{staticClass:"block-divider"},[r("div")]):e._e(),e._v(" "),e.showReleases?r("property-block",{attrs:{label:"Releases",wide:""}},e._l(e.pipeline.releaseTargets,(function(t){return r("release-badge-for-build",{key:t.name,attrs:{"release-target":t,build:e.build}})})),1):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(5752),a=r(2981),o=r(7636),l=r(6988),c=r(5425),u=r(2874),p=r(1040),d=r(1033),h=r(5689),f=r(8402),m=r(1618),b=r(6546);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={components:{BProgress:n.D,BProgressBar:a.Q,CommitLink:o.Z,ReleaseButton:l.Z,RebuildButton:c.Z,CancelButton:u.Z,ReleaseBadgeForBuild:p.Z,PropertyBlock:d.Z,DurationLabel:h.Z,RepositoryTitle:f.Z,Commits:m.Z},props:{build:{type:Object,default:null},builds:{type:Array,default:null},pipeline:{type:Object,default:null},allBuildsMode:{type:Boolean,default:!1}},data:function(){return{now:Date.now()}},created:function(){this.updateNow()},methods:{updateNow:function(){this.now=Date.now(),!this.build||"pending"!==this.build.buildStatus&&"running"!==this.build.buildStatus||b.Z.timeout(this.timeout,this.updateNow,1)}},beforeDestroy:function(){clearTimeout(this.timeout)},computed:v(v({},(0,s.rn)("user",{user:"me"})),{},{showReleases:function(){var e=this;return!!(this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0)&&this.pipeline.releaseTargets.some((function(t){return t.activeReleases&&t.activeReleases.some((function(t){return t.releaseVersion===e.build.buildVersion}))}))},showActions:function(){return!this.allBuildsMode&&this.user&&this.user.active&&this.build&&("failed"===this.build.buildStatus||"pending"===this.build.buildStatus||"running"===this.build.buildStatus||"canceled"===this.build.buildStatus||"canceling"===this.build.buildStatus||this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0&&"succeeded"===this.build.buildStatus)}})},w=(0,r(1900).Z)(_,i,[],!1,null,null,null).exports},2874:function(e,t,r){r.d(t,{Z:function(){return m}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user.active&&(e.build&&("pending"===e.build.buildStatus||"running"===e.build.buildStatus||"canceling"===e.build.buildStatus)||e.release&&("pending"===e.release.releaseStatus||"running"===e.release.releaseStatus||"canceling"===e.release.releaseStatus)||e.bot&&("pending"===e.bot.botStatus||"running"===e.bot.botStatus||"canceling"===e.bot.botStatus))?r("b-input-group",{staticStyle:{width:"auto"}},[r("b-input-group-text",{staticClass:"border border-danger text-danger bg-white",attrs:{slot:"prepend"},on:{click:function(e){e.stopPropagation()}},slot:"prepend"},[r("font-awesome-icon",{attrs:{icon:"ban"}})],1),e._v(" "),r("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[e._v("\n    Cancel\n  ")])],1):e._e()};i._withStripped=!0;var s=r(6127),n=r(8222),a=r(5193),o=r(629),l=r(8947),c=r(1436),u=r(7810);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}l.vI.add(c.gPx);var h={components:{BInputGroup:s.w,BInputGroupText:n.e,BButton:a.T,FontAwesomeIcon:u.GN},props:{build:{type:Object,default:null},release:{type:Object,default:null},bot:{type:Object,default:null}},data:function(){return{clicked:!1}},methods:{cancel:function(e){var t=this;this.user.active&&(!this.build||"pending"!==this.build.buildStatus&&"running"!==this.build.buildStatus&&"canceling"!==this.build.buildStatus?!this.release||"pending"!==this.release.releaseStatus&&"running"!==this.release.releaseStatus&&"canceling"!==this.release.releaseStatus?!this.bot||"pending"!==this.bot.botStatus&&"running"!==this.bot.botStatus&&"canceling"!==this.bot.botStatus||this.axios.delete("/api/pipelines/".concat(this.bot.repoSource,"/").concat(this.bot.repoOwner,"/").concat(this.bot.repoName,"/bots/").concat(this.bot.id)).then((function(e){t.bot.botStatus="canceling"})).catch((function(e){console.warn(e)})):this.axios.delete("/api/pipelines/".concat(this.release.repoSource,"/").concat(this.release.repoOwner,"/").concat(this.release.repoName,"/releases/").concat(this.release.id)).then((function(e){t.release.releaseStatus="canceling"})).catch((function(e){console.warn(e)})):this.axios.delete("/api/pipelines/".concat(this.build.repoSource,"/").concat(this.build.repoOwner,"/").concat(this.build.repoName,"/builds/").concat(this.build.id)).then((function(e){t.build.buildStatus="canceling"})).catch((function(e){console.warn(e)})))}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,o.rn)("user",{user:"me"}))},f=h,m=(0,r(1900).Z)(f,i,[],!1,null,null,null).exports},3565:function(e,t,r){r.d(t,{Z:function(){return d}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.filteredLabels.length>1?r("b-input-group",{staticClass:"mb-3 d-inline-flex"},[r("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines on frequently used labels"}},[r("font-awesome-icon",{attrs:{icon:"tags"}})],1),e._v(" "),r("b-form-select",{staticClass:"d-inline-flex",attrs:{options:e.filteredLabels},on:{change:e.onChange},model:{value:e.mutableModel,callback:function(t){e.mutableModel=t},expression:"mutableModel"}})],1):e._e()};i._withStripped=!0;var s=r(6127),n=r(7754),a=r(5343),o=r(3209),l=r(8947),c=r(1436),u=r(7810);l.vI.add(c.tho);var p={components:{BInputGroup:s.w,BInputGroupPrepend:n.P,BFormSelect:a.K,FontAwesomeIcon:u.GN},props:{filter:{type:Object,default:null}},mixins:[o.Z],data:function(){return{labels:[],pagination:{page:1,size:15},refresh:!0,mutableModel:null}},created:function(){this.loadFrequentLabels()},methods:{loadFrequentLabels:function(){var e=this,t="";this.filter&&this.filter.labels&&this.filter.labels.length>0&&(t=this.filter.labels.split(",").join("&filter[labels]="));var r="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(r+="&filter[status]=pending&filter[status]=canceling"),this.axios.get("/api/labels/frequent?".concat(r,"&filter[since]=").concat(this.filter.since,"&filter[search]=").concat(this.filter.search,"&filter[labels]=").concat(t,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.labels=t.data.items,e.periodicallyRefreshFrequentLabels(5)})).catch((function(t){e.periodicallyRefreshFrequentLabels(30)}))},periodicallyRefreshFrequentLabels:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadFrequentLabels,i))},labelLinkGenerator:function(e){return this.filter&&this.filter.labels&&0!==this.filter.labels.length?this.filter.labels+","+e:e},onChange:function(e){this.$router.push({query:this.queryGenerator({labels:this.labelLinkGenerator(e),page:1})}),this.mutableModel=null}},computed:{filteredLabels:function(){if(!this.labels)return[];var e=[];return this.filter&&this.filter.labels&&(e=this.filter.labels.split(",")),[{value:null,text:"Frequent labels"}].concat(this.labels.filter((function(t){return-1===e.indexOf("".concat(t.key,"=").concat(t.value))})).map((function(e){return{value:"".concat(e.key,"=").concat(e.value),text:"".concat(e.key,"=").concat(e.value," (").concat(e.pipelinescount,")")}})))}},watch:{filter:{handler:function(e,t){this.loadFrequentLabels()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},d=(0,r(1900).Z)(p,i,[],!1,null,null,null).exports},3851:function(e,t,r){r.d(t,{Z:function(){return n}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-badge",{staticClass:"mr-1",attrs:{to:{name:"CatalogGroupDetails",params:{id:e.group.id}},variant:"warning"}},[e._v("\n  "+e._s(e.group.name)+"\n")])};i._withStripped=!0;var s={components:{BBadge:r(6034).k},props:{group:{type:Object,default:null}}},n=(0,r(1900).Z)(s,i,[],!1,null,null,null).exports},4740:function(e,t,r){r.d(t,{Z:function(){return b}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-nav",{staticClass:"m-3 d-none d-lg-flex",attrs:{tabs:""}},e._l(e.routes,(function(t){return r("b-nav-item",{key:t.name,class:t.meta&&t.meta.class?t.meta.class:"",attrs:{to:{name:t.name},exact:!!t.meta&&t.meta.exact}},[t.meta&&t.meta.icon?r("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:t.meta?t.meta.icon:""}}):e._e(),e._v(" "),r("span",[e._v("\n        "+e._s(t.meta&&t.meta.text?t.meta.text:t.name)+"\n      ")])],1)})),1),e._v(" "),r("b-dropdown",{staticClass:"m-3 d-lg-none",attrs:{variant:e.variant,block:"","menu-class":"w-100"},scopedSlots:e._u([{key:"button-content",fn:function(){return[e.activeRouteIcon?r("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:e.activeRouteIcon}}):e._e(),e._v("\n      "+e._s(e.activeRouteText)+"\n    ")]},proxy:!0}])},[e._v(" "),e._l(e.routes,(function(t){return r("b-dropdown-item",{key:t.name,class:t.meta&&t.meta.class?t.meta.class:"",attrs:{to:{name:t.name},exact:!!t.meta&&t.meta.exact}},[t.meta&&t.meta.icon?r("font-awesome-icon",{staticClass:"dropdown-icon",attrs:{icon:t.meta?t.meta.icon:""}}):e._e(),e._v(" "),r("span",[e._v("\n        "+e._s(t.meta&&t.meta.text?t.meta.text:t.name)+"\n      ")])],1)}))],2)],1)};i._withStripped=!0;var s=r(629),n=r(9027),a=r(2450),o=r(5189),l=r(7379),c=r(8947),u=r(1436),p=r(7810);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}c.vI.add(u.DD4,u.U7t,u.ILF,u.FVb,u.Hw7,u.Kak,u.NkB,u.neB,u.BC0,u.E9T,u.OS1,u.nFo,u.Stf,u.m6i,u.Gg,u.jPh,u.CgH,u.cf$,u.VE0,u.o4t,u.X8G,u.BC0,u.Mm7,u.FL8,u.bJI,u.oso,u.a3n);var m={components:{BNav:n.O,BNavItem:a.r,BDropdown:o.R,BDropdownItem:l.E,FontAwesomeIcon:p.GN},props:{sectionRouteName:{type:String,default:null}},methods:{isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)}},computed:h(h({},(0,s.rn)("user",{user:"me"})),{},{routes:function(){var e=this,t=this.$route.matched[0].name,r=this.$router.options.routes.find((function(e){return e.name===t}));return r&&r.children?r.children.filter((function(t){return(!t.meta||!t.meta.hide)&&(!!(e.user&&e.user.active||t.meta&&t.meta.allowedWithoutAuth)&&!(t.meta&&t.meta.requiredRole&&!(e.user&&e.user.active&&e.user.roles&&e.user.roles.includes(t.meta.requiredRole))))})):[]},activeRouteText:function(){return this.$route.meta&&this.$route.meta.text?this.$route.meta.text:this.$route.name},activeRouteIcon:function(){if(this.$route.meta&&this.$route.meta.icon)return this.$route.meta.icon},section:function(){var e=this.$route.matched[0].name;return this.sectionRouteName&&(e=this.sectionRouteName),this.$router.options.routes.find((function(t){return t.name===e}))},variant:function(){var e=this.section;return e&&e.meta&&e.meta.variant?e.meta.variant:"secondary"}})},b=(0,r(1900).Z)(m,i,[],!1,null,null,null).exports},1247:function(e,t,r){r.d(t,{Z:function(){return p}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.logCount>0?r("b-button-group",{staticClass:"mb-3 bg-white"},[e._l(e.logs,(function(t,i){return r("b-button",{key:t.id,class:[t.id===e.logid?"active":"border-btn-group"],attrs:{to:{params:{logid:t.id}},"active-class":"router-link-active",variant:"outline-primary",title:t.insertedAt}},[e._v("\n    "+e._s(i+1)+" / "+e._s(e.logCount)+"\n  ")])})),e._v(" "),"pending"===e.status||"running"===e.status||"canceling"===e.status?r("b-button",{class:[e.logid?"border-btn-group":"active"],attrs:{to:{params:{logid:null}},"active-class":"router-link-active",variant:"outline-primary"}},[e._v("\n    "+e._s(e.logCount)+" / "+e._s(e.logCount)+" "),r("font-awesome-icon",{attrs:{icon:"stream"}})],1):e._e()],2):e._e()};i._withStripped=!0;var s=r(5969),n=r(5193),a=r(3209),o=r(8947),l=r(1436),c=r(7810);o.vI.add(l.aC2);var u={components:{BButtonGroup:s.a,BButton:n.T,FontAwesomeIcon:c.GN},mixins:[a.Z],props:{logUrl:{type:String,default:null},routeName:{type:String,default:null},status:{type:String,default:null},logid:{type:String,default:null}},data:function(){return{logs:[],refresh:!0}},created:function(){this.loadAllLogs()},methods:{loadAllLogs:function(){var e=this;this.axios.get(this.logUrl).then((function(t){e.logs=t.data.items,e.redirectIfNeeded(),e.periodicallyRefresh(15)})).catch((function(t){e.periodicallyRefresh(30)}))},redirectIfNeeded:function(){this.logid||"pending"!==this.status&&"running"!==this.status&&"canceling"!==this.status&&0!==this.logs.length&&this.$router.replace({params:{logid:this.logs[this.logs.length-1].id}})},periodicallyRefresh:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadAllLogs,i))}},computed:{logCount:function(){return"pending"===this.status||"running"===this.status||"canceling"===this.status?this.logs.length+1:this.logs.length}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},p=(0,r(1900).Z)(u,i,[],!1,null,null,null).exports},8167:function(e,t,r){r.d(t,{Z:function(){return I}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.steps&&e.steps.length>0?r("div",{staticClass:"accordion m-0"},[r("div",{attrs:{role:"tablist"}},e._l(e.filteredSteps,(function(t){return r("b-card",{key:t.key,staticClass:"log-stage-block",attrs:{"no-body":""}},[r("b-card-header",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.collapseID,expression:"step.collapseID"}],staticClass:"row m-0 pt-3 pr-2 pb-3 pl-2 clickable border-0 rounded-0",class:e._f("bootstrapClass")(t.status,"text"),attrs:{role:"tab"}},[r("property-block",{attrs:{label:"Stage","label-css-class":"pl-5","value-css-class":"h4",value:t.step}},[r("status-icon",{staticStyle:{width:"42px"},attrs:{status:t.status}}),e._v("\n          "+e._s(t.step)+"\n          "),t.autoInjected?r("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"small ml-2",attrs:{icon:"bolt",title:"This stage is automatically injected by Estafette CI"}}):e._e()],1),e._v(" "),r("property-block",{staticClass:"d-none d-lg-block",attrs:{label:"Image"}},[t.image&&t.image.name?r("span",{attrs:{title:t.image.name+":"+t.image.tag}},[e._v("\n            "+e._s(t.image.name)+":"+e._s(t.image.tag)+"\n          ")]):r("span",[e._v("\n            -\n          ")]),e._v(" "),r("log-stage-icons",{attrs:{step:t,"max-lines-to-show":e.maxLinesToShow}})],1),e._v(" "),r("property-block",{staticClass:"d-none d-xxl-block text-right",attrs:{label:"Image size"}},[t.image&&t.image.name&&("RUNNING"==t.status||"SUCCEEDED"==t.status||"FAILED"==t.status)?r("span",[t.image&&t.image.imageSize?r("span",{attrs:{title:e._f("formatBytes")(t.image.imageSize)}},[e._v("\n              "+e._s(e._f("formatBytes")(t.image.imageSize))+"\n            ")]):r("em",[e._v("\n              -\n            ")])]):r("span",[e._v("\n            -\n          ")])]),e._v(" "),r("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-right",attrs:{label:"Pull time"}},[t.image&&t.image.name&&("RUNNING"==t.status||"SUCCEEDED"==t.status||"FAILED"==t.status)?r("span",[t.image.pullDuration&&t.image.pullDuration>0?r("span",{attrs:{title:e._f("formatDuration")(t.image.pullDuration)}},[e._v("\n              "+e._s(e._f("formatDuration")(t.image.pullDuration))+"\n            ")]):r("em",[e._v("\n              -\n            ")])]):r("span",[e._v("\n            -\n          ")])]),e._v(" "),r("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-right",attrs:{label:"Execution time",value:e._f("formatDuration")(t.duration)}},[!t.duration||"SUCCEEDED"!=t.status&&"FAILED"!=t.status?r("span",[e._v("\n            -\n          ")]):r("span",[e._v("\n            "+e._s(e._f("formatDuration")(t.duration))+"\n          ")])]),e._v(" "),r("property-block",{staticClass:"d-none d-md-block pr-5 col-xxxl-1 text-right",attrs:{label:"Stage time",value:e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration)}},["RUNNING"==t.status||"SUCCEEDED"==t.status||"FAILED"==t.status?r("span",[e._v("\n            "+e._s(e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration))+"\n          ")]):r("span",[e._v("\n            -\n          ")])])],1),e._v(" "),t.services&&t.services.length>0?r("b-card-header",{staticClass:"row m-0 p-2 border-0 rounded-0 justify-content-center",attrs:{role:"tab"}},[r("property-block",{staticClass:"text-center",attrs:{label:"Service containers",wide:"","label-css-class":"d-xxxl-block"}},e._l(t.services,(function(t){return r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.collapseID,expression:"service.collapseID"}],key:t.key,staticClass:"mr-2 mb-1",attrs:{variant:e._f("bootstrapVariant")(t.status,!0),title:t.step}},[e._v("\n            "+e._s(t.step)+"\n            "),r("span",[e._v("\n              "+e._s(e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration))+"\n            ")]),e._v(" "),r("log-stage-icons",{attrs:{step:t,"max-lines-to-show":e.maxLinesToShow}})],1)})),1)],1):e._e(),e._v(" "),t.nestedSteps&&t.nestedSteps.length>0?r("b-card-header",{staticClass:"row m-0 p-2 border-0 rounded-0 justify-content-center",attrs:{role:"tab"}},[r("property-block",{staticClass:"text-center",attrs:{label:"Parallel stages",wide:"","label-css-class":"d-xxxl-block"}},e._l(t.nestedSteps,(function(t){return r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.collapseID,expression:"nestedStep.collapseID"}],key:t.key,staticClass:"mr-2 mb-1",attrs:{variant:e._f("bootstrapVariant")(t.status,!0),title:t.step}},[e._v("\n            "+e._s(t.step)+"\n            "),r("span",[e._v("\n              "+e._s(e._f("formatDuration")((t.image?t.image.pullDuration:0)+t.duration))+"\n            ")]),e._v(" "),r("log-stage-icons",{attrs:{step:t,"max-lines-to-show":e.maxLinesToShow}})],1)})),1)],1):e._e(),e._v(" "),r("b-collapse",{staticClass:"container-fluid collapse p-0 rounded-bottom",attrs:{id:t.collapseID,visible:"RUNNING"===t.status||"FAILED"===t.status,accordion:"log-steps-accordion",role:"tabpanel"},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.visible;return[r("log-stage-detail",{attrs:{visible:s&&t.logLines&&t.logLines.length>0,step:t,"max-lines-to-show":e.maxLinesToShow,"show-timestamps":e.showTimestamps,"show-truncated-logs":e.showTruncatedLogs}})]}}],null,!0)}),e._v(" "),e._l(t.services,(function(t){return r("b-collapse",{key:t.collapseID,staticClass:"container-fluid collapse p-0 rounded-bottom",attrs:{id:t.collapseID,accordion:"log-steps-accordion",role:"tabpanel"},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.visible;return[r("log-stage-detail",{attrs:{visible:s,step:t,"max-lines-to-show":e.maxLinesToShow,"show-timestamps":e.showTimestamps,"show-truncated-logs":e.showTruncatedLogs}})]}}],null,!0)})})),e._v(" "),e._l(t.nestedSteps,(function(t){return r("b-collapse",{key:t.collapseID,staticClass:"container-fluid collapse p-0 rounded-bottom",attrs:{id:t.collapseID,accordion:"log-steps-accordion",role:"tabpanel"},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.visible;return[r("log-stage-detail",{attrs:{visible:s,step:t,"max-lines-to-show":e.maxLinesToShow,"show-timestamps":e.showTimestamps,"show-truncated-logs":e.showTruncatedLogs}})]}}],null,!0)})}))],2)})),1),e._v(" "),r("div",{staticClass:"log-summary-block",class:e._f("bootstrapClass")(e.totalStatus,"text")},[r("div",{staticClass:"property-block"}),e._v(" "),r("div",{staticClass:"property-block d-none d-lg-block"}),e._v(" "),r("property-block",{staticClass:"d-none d-xxl-block text-right",attrs:{label:"Total image size",value:e._f("formatBytes")(e.totalImageSize)}}),e._v(" "),r("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-right",attrs:{label:"Total pull time",value:e._f("formatDuration")(e.totalPullDuration)}}),e._v(" "),r("property-block",{staticClass:"d-none d-xxxl-block col-xxxl-1 text-right",attrs:{label:"Total execution time",value:e._f("formatDuration")(e.totalDuration)}}),e._v(" "),r("property-block",{staticClass:"d-none d-md-block pr-5 col-xxxl-1 text-right",attrs:{label:"Total time",value:e._f("formatDuration")(e.totalPullDuration+e.totalDuration)}})],1),e._v(" "),r("div",{staticClass:"log-buttons"},[r("b-button-group",{attrs:{vertical:""}},[r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],attrs:{title:"Scroll up",size:"lg"},on:{click:e.scrollUp}},[r("font-awesome-icon",{staticClass:"sidebar-icon",attrs:{icon:"chevron-up"}})],1),e._v(" "),e.isTailing()?r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],attrs:{pressed:e.scrollEnabled,title:"Toggle tailing",size:"lg"},on:{"update:pressed":function(t){e.scrollEnabled=t},click:e.blurActiveElement}},[r("font-awesome-icon",{staticClass:"sidebar-icon",attrs:{icon:"eye"}})],1):e._e(),e._v(" "),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],attrs:{pressed:e.showInjectedStages,title:"Toggle injected stages",size:"lg"},on:{"update:pressed":function(t){e.showInjectedStages=t},click:e.blurActiveElement}},[r("font-awesome-icon",{staticClass:"sidebar-icon",attrs:{icon:"bolt"}})],1),e._v(" "),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"d-none d-xl-flex",attrs:{pressed:e.showTimestamps,title:"Toggle timestamps",size:"lg"},on:{"update:pressed":function(t){e.showTimestamps=t},click:e.blurActiveElement}},[r("font-awesome-icon",{staticClass:"sidebar-icon",attrs:{icon:"stopwatch"}})],1),e._v(" "),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],attrs:{pressed:e.showTruncatedLogs,title:"Toggle truncated logs",size:"lg"},on:{"update:pressed":function(t){e.showTruncatedLogs=t},click:e.blurActiveElement}},[r("font-awesome-icon",{staticClass:"sidebar-icon",attrs:{icon:"expand-alt"}})],1),e._v(" "),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],attrs:{title:"Scroll down",size:"lg"},on:{click:e.scrollDown}},[r("font-awesome-icon",{staticClass:"sidebar-icon",attrs:{icon:"chevron-down"}})],1)],1)],1)]):r("div",{staticClass:"m-3"},[e._v("\n  Hold on, we're waiting for the logs to come in!\n")])};i._withStripped=!0;var s=r(3279),n=r.n(s),a=r(5193),o=r(2145),l=r(7047),c=r(3258),u=r(5969),p=r(3028),d=r(1033),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.supported?r("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{icon:e.icon,title:e.status}}):e._e()};h._withStripped=!0;var f=r(8947),m=r(1436),b=r(7810);f.vI.add(m.f8k,m.aQp,m.nYk,m._1v,m.oD0,m.ul5,m.KtF);var g={components:{FontAwesomeIcon:b.GN},props:{status:{type:String,default:null}},data:function(){return{icons:{succeeded:"check-circle",running:"play-circle",failed:"times-circle",skipped:"dot-circle",canceled:"stop-circle",canceling:"pause-circle",pending:"plus-circle"}}},computed:{supported:function(){return this.status&&this.status.toLowerCase()in this.icons},icon:function(){return this.icons[this.status.toLowerCase()]}}},v=r(1900),y=(0,v.Z)(g,h,[],!1,null,null,null).exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.visible&&e.step.logLines&&e.step.logLines.length>0?r("div",[r("div",{staticClass:"row m-0 pt-3 pr-2 pb-3 pl-2 border-0 rounded-0 bg-light"},[r("property-block",{attrs:{label:"Image"}},[e.step.image&&e.step.image.name?r("span",{attrs:{title:e.step.image.name+":"+e.step.image.tag}},[e._v("\n        "+e._s(e.step.image.name)+":"+e._s(e.step.image.tag)+"\n      ")]):r("span",[e._v("\n        -\n      ")]),e._v(" "),r("log-stage-icons",{attrs:{step:e.step,"max-lines-to-show":e.maxLinesToShow}})],1),e._v(" "),r("property-block",{attrs:{label:"Image size"}},[e.step.image&&e.step.image.name&&("RUNNING"==e.step.status||"SUCCEEDED"==e.step.status||"FAILED"==e.step.status)?r("span",[e.step.image&&e.step.image.imageSize?r("span",{attrs:{title:e._f("formatBytes")(e.step.image.imageSize)}},[e._v("\n          "+e._s(e._f("formatBytes")(e.step.image.imageSize))+"\n        ")]):r("em",[e._v("\n          -\n        ")])]):r("span",[e._v("\n        -\n      ")])]),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Pull time"}},[e.step.image&&e.step.image.name&&("RUNNING"==e.step.status||"SUCCEEDED"==e.step.status||"FAILED"==e.step.status)?r("span",[e.step.image.pullDuration&&e.step.image.pullDuration>0?r("span",{attrs:{title:e._f("formatDuration")(e.step.image.pullDuration)}},[e._v("\n          "+e._s(e._f("formatDuration")(e.step.image.pullDuration))+"\n        ")]):r("em",[e._v("\n          -\n        ")])]):r("span",[e._v("\n        -\n      ")])]),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Execution time",value:e._f("formatDuration")(e.step.duration)}},[!e.step.duration||"SUCCEEDED"!=e.step.status&&"FAILED"!=e.step.status?r("span",[e._v("\n        -\n      ")]):r("span",[e._v("\n        "+e._s(e._f("formatDuration")(e.step.duration))+"\n      ")])]),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Total time",value:e._f("formatDuration")((e.step.image?e.step.image.pullDuration:0)+e.step.duration)}},[!e.step.image||"RUNNING"!=e.step.status&&"SUCCEEDED"!=e.step.status&&"FAILED"!=e.step.status?r("span",[e._v("\n        -\n      ")]):r("span",[e._v("\n        "+e._s(e._f("formatDuration")((e.step.image?e.step.image.pullDuration:0)+e.step.duration))+"\n      ")])])],1),e._v(" "),r("div",{staticClass:"text-light text-monospace bg-dark m-0 p-3 pr-5"},e._l(e.cappedLogLines(e.step.logLines),(function(t,i){return r("div",{key:t.line?t.line:i,staticClass:"row no-gutters"},[e.showTimestamps?r("div",{staticClass:"col-1 log-timestamp text-white-50 d-none d-xl-flex"},[e._v("\n        "+e._s(e._f("moment")(t.timestamp,"YYYY-MM-DD HH:mm:ss"))+"\n      ")]):e._e(),e._v(" "),r("div",{staticClass:"col log-text",domProps:{innerHTML:e._s(e.formatLog(t.text))}})])})),0)]):e._e()};_._withStripped=!0;var w=r(4431),S=r.n(w),O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"ml-1"},[r("log-warning",{staticClass:"text-warning",attrs:{step:e.step,"max-lines-to-show":e.maxLinesToShow}}),e._v(" "),r("extension-icon",{staticClass:"text-info",attrs:{image:e.step.image}}),e._v(" "),e.step.image&&e.step.image.isTrusted?r("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-success",attrs:{icon:"shield-alt",title:"This image is configured as trusted by Estafette CI"}}):e._e(),e._v(" "),e.step.image&&e.step.image.hasInjectedCredentials?r("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-info",attrs:{icon:"key",title:"This image has injected credentials"}}):e._e()],1)};O._withStripped=!0;var x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.step&&e.step.logLines&&e.step.logLines.length>e.maxLinesToShow?r("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"This stage has a total of "+e.step.logLines.length+" log lines; please make it less verbose to avoid it getting truncated",icon:"exclamation-circle"}}):e._e()};x._withStripped=!0,f.vI.add(m.RLE);var C={components:{FontAwesomeIcon:b.GN},props:{step:{type:Object,default:null},maxLinesToShow:{type:Number,default:1e3}}},P=(0,v.Z)(C,x,[],!1,null,null,null).exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.supported?r("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{icon:["fab",e.icon],title:"This stage uses a known extension image"}}):e._e()};T._withStripped=!0;var j=r(1417);f.vI.add(j.XWM,j.XSg,j.SrY,j.zhw,j.KOC,j.xDz,j.apG,j.P$n,j.pVh,j.r1q,j.Bmx,j.nFO);var D={components:{FontAwesomeIcon:b.GN},props:{image:{type:Object,default:null}},data:function(){return{icons:{"extensions/docker":"docker","extensions/git-clone":"git","extensions/slack-build-status":"slack","extensions/github-status":"github","extensions/github-release":"github","extensions/bot-github":"github","extensions/bitbucket-status":"bitbucket","extensions/npm-audit":"npm","extensions/cloudflare-purge":"cloudflare",openjdk:"java",adoptopenjdk:"java",node:"node",php:"php",python:"python",docker:"docker",rust:"rust"}}},computed:{supported:function(){return this.image&&this.image.name&&this.image.name in this.icons},icon:function(){return this.icons[this.image.name]}}},k=(0,v.Z)(D,T,[],!1,null,null,null).exports;f.vI.add(m.U7t,m.DD4);var B={components:{FontAwesomeIcon:b.GN,LogWarning:P,ExtensionIcon:k},props:{step:{type:Object,default:null},maxLinesToShow:{type:Number,default:1e3}}},N=(0,v.Z)(B,O,[],!1,null,null,null).exports,R={components:{LogStageIcons:N,PropertyBlock:d.Z},props:{visible:{type:Boolean,default:!1},step:{type:Object,default:null},maxLinesToShow:{type:Number,default:1e3},showTimestamps:{type:Boolean,default:!1},showTruncatedLogs:{type:Boolean,default:!1}},methods:{formatLog:function(e){return e?(new(S())).ansi_to_html(e):e},cappedLogLines:function(e){if(!e||e.length<=this.maxLinesToShow||this.showTruncatedLogs)return e;var t=e.slice(0,5),r=e.slice(5,8).map((function(e,t){return 1===t?{line:e.line,timestamp:null,streamType:e.streamType,text:"== TOO MANY LINES; TRUNCATED BY ESTAFETTE; SHOW ALL BY TOGGLING 'TRUNCATED LOGS' IN THE TOOLBAR ON THE RIGHT =="}:{line:e.line,timestamp:null,streamType:e.streamType,text:" "}})),i=e.slice(e.length-this.maxLinesToShow+5+3);return t.concat(r).concat(i)}}},E=(0,v.Z)(R,_,[],!1,null,"6304eb50",null).exports;f.vI.add(m.Mdf,m.mTx,m.ptq,m.U$5,m.TTL,m.BDt);var L={components:{BButton:a.T,BCard:o._,BCardHeader:l.p,BCollapse:c.k,PropertyBlock:d.Z,LogStageDetail:E,LogStageIcons:N,FontAwesomeIcon:b.GN,BButtonGroup:u.a,StatusIcon:y},directives:{"b-toggle":p.M},props:{logUrl:{type:String,default:null},status:{type:String,default:null},allowTail:{type:Boolean,default:!1}},data:function(){return{steps:[],refresh:!0,tailedSteps:[],showInjectedStages:!1,showTimestamps:!1,maxLinesToShow:500,maxLinesToShowWhenTailing:50,showTruncatedLogs:!1,scrollEnabled:!0}},computed:{filteredSteps:function(){var e=this;return this.steps?this.steps.filter((function(t){return!t.autoInjected||e.showInjectedStages||"PENDING"===t.status||"RUNNING"===t.status||"FAILED"===t.status})).map((function(e){return e.key=e.step+"-"+(e.runIndex?e.runIndex:0),e.collapseID="accordion-"+e.key,e.services&&(e.services=e.services.map((function(t){return t.key=e.step+"-"+(e.runIndex?e.runIndex:0)+"-service-"+t.step,t.collapseID="accordion-"+t.key,t}))),e.nestedSteps&&(e.nestedSteps=e.nestedSteps.map((function(t){return t.key=e.step+"-"+(e.runIndex?e.runIndex:0)+"-"+t.step,t.collapseID="accordion-"+t.key,t}))),e})):[]},totalImageSize:function(){return this.steps?this.steps.reduce((function(e,t){return e+(t.image&&t.image.imageSize?t.image.imageSize:0)}),0):0},totalPullDuration:function(){return this.steps?this.steps.reduce((function(e,t){return e+(t.image&&t.image.pullDuration?t.image.pullDuration:0)}),0):0},totalDuration:function(){return this.steps?this.steps.reduce((function(e,t){return e+(t.duration?t.duration:0)}),0):0},totalStatus:function(){return this.totalStatusMethod()},hasTruncatedLogs:function(){var e=this;return this.filteredSteps&&this.filteredSteps.some((function(t){return t.logLines&&t.logLines.length>e.maxLinesToShow||t.services&&t.services.some((function(t){return t.logLines&&t.logLines.length>e.maxLinesToShow}))||t.nestedSteps&&t.nestedSteps.some((function(t){return t.logLines&&t.logLines.length>e.maxLinesToShow}))}))}},created:function(){this.allowTail?this.tailLogs():this.loadLogs()},methods:{loadLogs:function(){var e=this;this.allowTail&&"succeeded"!==this.status&&"failed"!==this.status&&"canceled"!==this.status?this.periodicallyRefreshLogs(2):(this.tailedSteps=[],this.axios.get(this.logUrl).then((function(t){t.data.steps?e.steps=t.data.steps:e.steps=t.data,"FAILED"===e.totalStatusMethod()&&(e.showTruncatedLogs=!0)})).catch((function(t){console.warn(t),e.periodicallyRefreshLogs(2)})))},totalStatusMethod:function(){return this.steps?this.steps.reduce((function(e,t){return"CANCELED"===e||"CANCELED"===t.status?"CANCELED":"FAILED"===e||"FAILED"===t.status?"FAILED":"PENDING"===t.status||"RUNNING"===t.status?"RUNNING":"SUCCEEDED"}),"SUCCEEDED"):""},periodicallyRefreshLogs:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadLogs,i))},isTailing:function(){return this.allowTail&&("pending"===this.status||"running"===this.status||"canceling"===this.status)},tailLogs:function(){var e=this;this.isTailing()?(this.es=new EventSource("".concat(this.logUrl,".stream")),this.es.addEventListener("log",(function(t){if("pending"!==e.status&&"running"!==e.status&&"canceling"!==e.status)return e.es.close(),document.getElementById("main").scrollIntoView(!0),void e.loadLogs();var r=JSON.parse(t.data),i="stage";if(r.type&&(i=r.type),!r.type&&(!r.depth||0===r.depth)||r.type&&"stage"===i&&!r.parentStage){var s=e.tailedSteps.findIndex((function(e){return e===r.step})),n=s>-1?e.steps[s]:null;if(-1===s){var a="RUNNING";r.status&&(a=r.status),n={step:r.step,logLines:[],nestedSteps:[],services:[],exitCode:0,status:a,autoInjected:r.autoInjected,duration:0,lastLineNumber:0},e.tailedSteps.push(r.step),e.steps.push(n),s=e.steps.length-1}if(s!==e.tailedSteps.length-1)return;r.image&&(n.image=r.image),r.status&&(n.status=r.status),r.exitCode&&(n.exitCode=r.exitCode),r.duration&&(n.duration=r.duration),r.logLine&&r.logLine.line>n.lastLineNumber&&(n.logLines.push(r.logLine),n.lastLineNumber=r.logLine.line,r.logLine.line>e.maxLinesToShowWhenTailing&&n.logLines.shift())}else if(e.steps.length>0){var o,l,c=e.steps[e.steps.length-1];if(r.parentStage){var u=e.tailedSteps.findIndex((function(e){return e===r.parentStage}));u>-1&&(c=e.steps[u])}if("service"===i){if(l=(o=c.services.findIndex((function(e){return e.step===r.step})))>-1?c.services[o]:null,-1===o){var p="RUNNING";r.status&&(p=r.status),l={step:r.step,logLines:[],exitCode:0,status:p,autoInjected:!1,duration:0,lastLineNumber:0},c.services.push(l)}}else if(l=(o=c.nestedSteps.findIndex((function(e){return e.step===r.step})))>-1?c.nestedSteps[o]:null,-1===o){var d="RUNNING";r.status&&(d=r.status),l={step:r.step,logLines:[],exitCode:0,status:d,autoInjected:!1,duration:0,lastLineNumber:0},c.nestedSteps.push(l)}r.image&&(l.image=r.image),r.status&&(l.status=r.status),r.exitCode&&(l.exitCode=r.exitCode),r.duration&&(l.duration=r.duration),r.logLine&&r.logLine.line>l.lastLineNumber&&(l.logLines.push(r.logLine),l.lastLineNumber=r.logLine.line,r.logLine.line>e.maxLinesToShowWhenTailing&&l.logLines.shift())}e.scrollToLogTail()}),!1),this.es.addEventListener("close",(function(t){e.es.close(),document.getElementById("main").scrollIntoView(!0),e.loadLogs()}),!1),this.es.onerror=function(e){console.warn(e)}):this.loadLogs()},scrollToLogTail:n()((function(){this.scrollEnabled&&this.$el.scrollIntoView(!1)}),1e3,{maxWait:5e3}),scrollUp:function(e){this.blurActiveElement(),this.scrollEnabled=!1,window.scrollTo(0,0)},scrollDown:function(e){this.blurActiveElement(),this.scrollEnabled=!1,window.scrollTo(0,document.body.scrollHeight)},blurActiveElement:function(){"activeElement"in document&&document.activeElement.blur()}},watch:{$route:function(e,t){this.es&&this.es.close(),this.steps=[],this.tailedSteps=[],this.allowTail?this.tailLogs():this.loadLogs()}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.es&&this.es.close()}},I=(0,v.Z)(L,i,[],!1,null,"5da1e806",null).exports},1387:function(e,t,r){r.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.migration&&"completed"===e.migration.status?r("div",{staticClass:"migration-notice"},[r("b-alert",{attrs:{show:"",variant:"primary"}},[r("h5",[e._v("Migrated")]),e._v(" "),r("p",[e._v("\n      This repository was migrated on "+e._s(e._f("moment")(e.migration.updatedAt,"YYYY/MM/DD HH:mm:ss"))+". Redirecting to\n      "),r("b-link",{staticClass:"alert-link",attrs:{href:e.redirectURL}},[e._v("\n        "+e._s(e.redirectURLText)+"\n      ")])],1),e._v(" "),r("div",{staticClass:"redirect-progress"},[r("b-button",{staticClass:"start-pause-button",attrs:{variant:"outline-secondary"},on:{click:e.toggleCountDown}},[e._v("\n        "+e._s(this.pause?"▶︎":"❙❙")+"\n      ")]),e._v(" "),r("b-progress",{attrs:{variant:"primary",max:e.maxCount,value:e.currentCount,height:"8px"}})],1)])],1):e._e()};i._withStripped=!0;var s=r(3106),n=r(7347),a=r(5752),o=r(5193),l={components:{BAlert:s.F,BLink:n.we,BProgress:a.D,BButton:o.T},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},id:{type:String,default:null},page:{type:String,default:"overview"}},mounted:function(){this.fetchData()},data:function(){return{maxCount:40,currentCount:40,pause:"true"===localStorage.getItem("redirect-migrated"),interval:null,migration:null,pipeline:null,redirectURL:null,redirectURLText:null,intervalTimeoutMs:100}},methods:{startCountDown:function(){var e=this;return clearInterval(this.interval),this.migration&&"completed"===this.migration.status?setInterval((function(){e.currentCount--}),this.intervalTimeoutMs):null},toggleCountDown:function(){this.pause=!this.pause},fetchData:function(){var e=this;this.axios.get("/api/migrations/from/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName)).then((function(t){t.data&&(e.migration=t.data,e.pause||(e.pause=!1),e.id||(e.redirectURL="/pipelines/".concat(e.migration.toSource,"/").concat(e.migration.toOwner,"/").concat(e.migration.toName,"/").concat(e.page),e.redirectURLText="".concat(e.migration.toSource,"/").concat(e.migration.toOwner,"/").concat(e.migration.toName,"/").concat(e.page)))})).catch((function(e){console.debug("pipeline might not have been migrated",e)})),this.id&&this.axios.get("/api/migrations/".concat(this.page,"/").concat(this.id)).then((function(t){t.data&&(e.pipeline=t.data,e.redirectURL="/pipelines/".concat(e.pipeline.repoSource,"/").concat(e.pipeline.repoOwner,"/").concat(e.pipeline.repoName,"/").concat(e.page,"/").concat(e.pipeline.id),e.redirectURLText="".concat(e.pipeline.repoSource,"/").concat(e.pipeline.repoOwner,"/").concat(e.pipeline.repoName,"/").concat(e.page,"/").concat(e.pipeline.id))})).catch((function(t){console.error("no migrated ".concat(e.page," found"),t)}))}},watch:{pause:function(e){localStorage.setItem("redirect-migrated",e.toString()),e?clearInterval(this.interval):this.interval=this.startCountDown()},currentCount:function(e){e<-4&&(window.location.href=this.redirectURL)},redirectURL:function(e,t){e!==t&&e&&(this.maxCount=40,this.currentCount=40,this.intervalTimeoutMs=100,this.pause||(this.interval=this.startCountDown()))},page:function(e,t){e!==t&&e&&this.fetchData()}}},c=(0,r(1900).Z)(l,i,[],!1,null,null,null).exports},5425:function(e,t,r){r.d(t,{Z:function(){return m}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.allowedToRebuild()?r("b-input-group",{staticStyle:{width:"auto"}},[r("b-input-group-text",{staticClass:"border border-warning text-warning bg-white",attrs:{slot:"prepend"},on:{click:function(e){e.stopPropagation()}},slot:"prepend"},[r("font-awesome-icon",{attrs:{icon:"redo"}})],1),e._v(" "),r("b-button",{attrs:{variant:"outline-warning",size:"sm"},on:{click:function(t){return t.stopPropagation(),e.rebuild(t)}}},[e._v("\n    Rebuild\n  ")])],1):e._e()};i._withStripped=!0;var s=r(629),n=r(6127),a=r(5193),o=r(8222),l=r(8947),c=r(1436),u=r(7810);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}l.vI.add(c.XSV);var h={components:{BInputGroup:n.w,BButton:a.T,BInputGroupText:o.e,FontAwesomeIcon:u.GN},props:{build:{type:Object,default:null},builds:{type:Array,default:null}},data:function(){return{clicked:!1}},methods:{allowedToRebuild:function(){var e=this;return!(!this.user.active||!this.build||"failed"!==this.build.buildStatus&&"canceled"!==this.build.buildStatus)&&(!(this.builds&&this.builds.length>0)||!this.builds.some((function(t){return t.buildVersion===e.build.buildVersion&&"succeeded"===t.buildStatus})))},rebuild:function(e){var t=this;this.user.active&&this.axios.post("/api/pipelines/".concat(this.build.repoSource,"/").concat(this.build.repoOwner,"/").concat(this.build.repoName,"/builds"),this.build).then((function(e){t.builds.unshift(e.data),t.builds.shift()})).catch((function(e){console.warn(e)}))}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,s.rn)("user",{user:"me"}))},f=h,m=(0,r(1900).Z)(f,i,[],!1,null,null,null).exports},1040:function(e,t,r){r.d(t,{Z:function(){return n}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.matchingReleases.length>0?r("div",{class:["btn-light","btn btn-sm mr-1"]},[e._v("\n  "+e._s(e.releaseTarget.name)),e._l(e.matchingReleases,(function(t){return r("router-link",{key:t.id,staticClass:"badge ml-1 mb-1 d-block d-md-inline-block",class:e._f("bootstrapClass")(t.releaseStatus,"badge"),attrs:{to:{name:"PipelineReleaseLogs",params:{repoSource:t.repoSource,repoOwner:t.repoOwner,repoName:t.repoName,releaseID:t.id}},exact:"",tag:"span",title:t.action}},[t.action?r("span",[e._v("\n      "+e._s(t.action)+":\n    ")]):e._e(),e._v(e._s(t.releaseStatus)+"\n  ")])}))],2):e._e()};i._withStripped=!0;var s={props:{releaseTarget:{type:Object,default:null},build:{type:Object,default:null}},computed:{matchingReleases:function(){var e=this;return this.build&&this.build.buildStatus&&"succeeded"===this.build.buildStatus&&this.releaseTarget&&this.releaseTarget.activeReleases?this.releaseTarget.activeReleases.filter((function(t){return t.releaseVersion===e.build.buildVersion})):[]}}},n=(0,r(1900).Z)(s,i,[],!1,null,null,null).exports},6988:function(e,t,r){r.d(t,{Z:function(){return y}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user&&e.user.active&&e.pipeline.releaseTargets&&e.pipeline.releaseTargets.length>0&&"succeeded"===e.build.buildStatus?r("b-input-group",{staticStyle:{width:"auto"}},[r("b-input-group-text",{staticClass:"border border-secondary text-secondary bg-white",attrs:{slot:"prepend"},on:{click:function(e){e.stopPropagation()}},slot:"prepend"},[r("font-awesome-icon",{attrs:{icon:"upload"}})],1),e._v(" "),r("b-dropdown",{attrs:{size:"sm",id:"releaseAction",text:"Release to...",variant:"outline-secondary"}},e._l(e.pipeline.releaseTargets,(function(t){return r("div",{key:t.name},[e.hasActions(t)?r("div",{attrs:{role:"group","aria-labelledby":t.name}},[r("b-dropdown-header",{attrs:{id:t.name}},[e._v("\n          "+e._s(t.name)+":\n        ")]),e._v(" "),e._l(t.actions,(function(i){return r("b-dropdown-item-button",{key:t.name+"-"+i.name,attrs:{disabled:e.releaseTargetDisabled(t),"aria-describedby":t.name},on:{click:function(r){return r.stopPropagation(),e.startRelease(t,i,r)}}},[e._v("\n          - "+e._s(i.name)+"\n        ")])}))],2):e._e(),e._v(" "),e.hasActions(t)?e._e():r("b-dropdown-item-button",{key:t.name,attrs:{disabled:e.releaseTargetDisabled(t)},on:{click:function(r){return r.stopPropagation(),e.startRelease(t,null,r)}}},[e._v("\n        "+e._s(t.name)+"\n      ")])],1)})),0),e._v(" "),r("b-modal",{ref:"my-modal",attrs:{"hide-footer":"",title:"Release restricted"}},[e.error?r("div",{staticClass:"d-block text-center"},[r("h4",[e._v("\n        Release to '"+e._s(e.error.cluster)+"' is restricted\n        "),r("br"),e._v("\n        from this branch!\n      ")]),e._v(" "),e.error.repositoryReleaseControl.allowed&&e.error.repositoryReleaseControl.allowed.length>0?r("div",{staticClass:"text-left"},[e._v("\n        Allowed branches\n      ")]):e._e(),e._v(" "),e.error.repositoryReleaseControl.allowed&&e.error.repositoryReleaseControl.allowed.length>0?r("ul",{staticClass:"text-left"},e._l(e.error.repositoryReleaseControl.allowed,(function(t){return r("li",{key:t},[e._v("\n          "+e._s(t)+"\n        ")])})),0):e._e(),e._v(" "),e.error.repositoryReleaseControl.blocked&&e.error.repositoryReleaseControl.blocked.length>0?r("div",{staticClass:"text-left"},[e._v("\n        Blocked branches\n      ")]):e._e(),e._v(" "),e.error.repositoryReleaseControl.blocked&&e.error.repositoryReleaseControl.blocked.length>0?r("ul",{staticClass:"text-left"},e._l(e.error.repositoryReleaseControl.blocked,(function(t){return r("li",{key:t},[e._v("\n          "+e._s(t)+"\n        ")])})),0):e._e()]):e._e(),e._v(" "),r("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"outline-danger"},on:{click:e.hideModal}},[e._v("\n      Close\n    ")])],1)],1):e._e()};i._withStripped=!0;var s=r(629),n=r(5189),a=r(3630),o=r(2332),l=r(6127),c=r(8222),u=r(7995),p=r(5193),d=r(8947),h=r(1436),f=r(7810);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}d.vI.add(h.cf$);var g={components:{BDropdown:n.R,BDropdownHeader:a.X,BDropdownItemButton:o.t,BInputGroup:l.w,BInputGroupText:c.e,FontAwesomeIcon:f.GN,BModal:u.N,BButton:p.T},props:{pipeline:{type:Object,default:null},build:{type:Object,default:null}},data:function(){return{clicked:!1,error:{cluster:"",repositoryReleaseControl:{allowed:[],blocked:[]}}}},methods:{releaseTargetDisabled:function(e){return this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0&&this.pipeline.releaseTargets.some((function(t){return t.name===e.name&&t.activeReleases&&t.activeReleases.some((function(e){return e&&"running"===e.releaseStatus}))}))},startRelease:function(e,t,r){var i=this;if(this.user.active){var s={name:e.name,action:t?t.name:"",repoSource:this.build.repoSource,repoOwner:this.build.repoOwner,repoName:this.build.repoName,releaseVersion:this.build.buildVersion,releaseStatus:"pending"};this.updateRelease(s),this.axios.post("/api/pipelines/".concat(this.build.repoSource,"/").concat(this.build.repoOwner,"/").concat(this.build.repoName,"/releases"),s).then((function(e){s=e.data,i.updateRelease(s)})).catch((function(e){"Release not allowed on this branch"===e.message?(i.error=e,i.$refs["my-modal"].show()):console.warn(e)}))}},updateRelease:function(e){var t=this.pipeline.releaseTargets.find((function(t){return t.name===e.name}));if(t)if(t.activeReleases){var r=!1,i=t.activeReleases.map((function(t){return t.action?e.action&&t.action===e.action?(r=!0,e):t:(r=!0,e)}));r||i.push(e),t.activeReleases=i}else t.activeReleases=[e]},hasActions:function(e){return e&&e.actions&&e.actions.length>0},hideModal:function(){this.$refs["my-modal"].hide()}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,s.rn)("user",{user:"me"}))},v=g,y=(0,r(1900).Z)(v,i,[],!1,null,"5c162794",null).exports},5025:function(e,t,r){r.d(t,{Z:function(){return g}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-link",{staticClass:"row-block list-complete-item",attrs:{to:{name:"PipelineReleaseLogs",params:{repoSource:e.release.repoSource,repoOwner:e.release.repoOwner,repoName:e.release.repoName,releaseID:e.release.id}},tag:"div"}},[e.allReleasesMode?r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Pipeline"}},[r("repository-title",{attrs:{repo:e.release}})],1):e._e(),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:e.release.action?"Target + action":"Target",value:e.release.action?e.release.name+" / "+e.release.action:e.release.name}},[e._v("\n    "+e._s(e.release.name)),e.release.action?r("span",[e._v("\n      / "+e._s(e.release.action)+"\n    ")]):e._e()]),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Version",value:e.release.releaseVersion}}),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Status",value:e.release.releaseStatus}},[r("b-progress",[r("b-progress-bar",{attrs:{value:e.$options.filters.releaseProgressBarValue(e.pipeline,e.release,e.now),label:e.$options.filters.releaseProgressBarLabel(e.pipeline,e.release,e.now),variant:e.$options.filters.bootstrapVariant(e.release.releaseStatus),animated:e.$options.filters.animatedProgressBar(e.release.releaseStatus)}})],1)],1),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Released at"}},[e._v("\n    "+e._s(e._f("formatDatetime")(e.release.insertedAt))+"\n    "),r("duration-label",{attrs:{duration:e.release.duration,"pending-duration":e.release.pendingDuration}})],1),e._v(" "),r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Triggered by"}},[r("triggered-by",{attrs:{events:e.release.triggerEvents}})],1),e._v(" "),e.showActions?r("property-block",{staticClass:"col-xxxl-2",attrs:{label:"Actions"}},[r("cancel-button",{attrs:{release:e.release}})],1):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(5752),a=r(2981),o=r(2874),l=r(2725),c=r(1033),u=r(5689),p=r(8402),d=r(6546);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={components:{BProgress:n.D,BProgressBar:a.Q,CancelButton:o.Z,TriggeredBy:l.Z,PropertyBlock:c.Z,DurationLabel:u.Z,RepositoryTitle:p.Z},props:{release:{type:Object,default:null},pipeline:{type:Object,default:null},allReleasesMode:{type:Boolean,default:!1}},data:function(){return{now:Date.now()}},created:function(){this.updateNow()},methods:{updateNow:function(){this.now=Date.now(),!this.release||"pending"!==this.release.releaseStatus&&"running"!==this.release.releaseStatus||d.Z.timeout(this.timeout,this.updateNow,1)}},beforeDestroy:function(){clearTimeout(this.timeout)},computed:f(f({},(0,s.rn)("user",{user:"me"})),{},{showActions:function(){return!this.allReleasesMode&&this.user&&this.user.active&&this.release&&("pending"===this.release.releaseStatus||"running"===this.release.releaseStatus||"canceling"===this.release.releaseStatus)}})},g=(0,r(1900).Z)(b,i,[],!1,null,null,null).exports},7339:function(e,t,r){r.d(t,{Z:function(){return p}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-input-group",{staticClass:"mb-3"},[r("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines based on when they're last built or released"}},[r("font-awesome-icon",{attrs:{icon:"upload"}})],1),e._v(" "),r("b-form-select",{attrs:{options:e.releaseTargetOptions},on:{change:e.onChange},model:{value:e.mutableModel,callback:function(t){e.mutableModel=t},expression:"mutableModel"}})],1)};i._withStripped=!0;var s=r(5343),n=r(6127),a=r(7754),o=r(8947),l=r(1436),c=r(7810);o.vI.add(l.cf$);var u={components:{BFormSelect:s.K,BInputGroup:n.w,BInputGroupPrepend:a.P,FontAwesomeIcon:c.GN},props:{mode:{type:String,default:"pipelines"},filter:{type:Object,default:null},model:{type:String,default:null},onChange:{type:Function,default:null}},data:function(){return{targets:[],pagination:{page:1,size:15},refresh:!0,mutableModel:this.model}},created:function(){this.loadReleaseTargets()},methods:{loadReleaseTargets:function(){var e=this,t="";this.filter&&this.filter.labels&&this.filter.labels.length>0&&(t=this.filter.labels.split(",").join("&filter[labels]="));var r="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(r+="&filter[status]=pending&filter[status]=canceling"),this.axios.get("/api/releasetargets/".concat(this.mode,"?").concat(r,"&filter[since]=").concat(this.filter.since,"&filter[search]=").concat(this.filter.search,"&filter[labels]=").concat(t,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.targets=t.data.items,e.periodicallyRefreshReleaseTargets(5)})).catch((function(t){e.periodicallyRefreshReleaseTargets(30)}))},periodicallyRefreshReleaseTargets:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadReleaseTargets,i))}},watch:{filter:{handler:function(e,t){this.loadReleaseTargets()},deep:!0}},computed:{releaseTargetOptions:function(){var e=[{value:"",text:"All release targets"}];return this.targets&&this.targets.forEach((function(t){e.push({value:t.name,text:"".concat(t.name," (").concat(t.count,")")})})),e}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},p=(0,r(1900).Z)(u,i,[],!1,null,null,null).exports},6139:function(e,t,r){r.d(t,{Z:function(){return m}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.allowedToRerun()?r("b-input-group",{staticStyle:{width:"auto"}},[r("b-input-group-text",{staticClass:"border border-warning text-warning bg-white",attrs:{slot:"prepend"},on:{click:function(e){e.stopPropagation()}},slot:"prepend"},[r("font-awesome-icon",{attrs:{icon:"redo"}})],1),e._v(" "),r("b-button",{attrs:{variant:"outline-warning",size:"sm"},on:{click:function(t){return t.stopPropagation(),e.rerun(t)}}},[e._v("\n    Rerun\n  ")])],1):e._e()};i._withStripped=!0;var s=r(629),n=r(6127),a=r(5193),o=r(8222),l=r(8947),c=r(1436),u=r(7810);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}l.vI.add(c.XSV);var h={components:{BInputGroup:n.w,BButton:a.T,BInputGroupText:o.e,FontAwesomeIcon:u.GN},props:{bot:{type:Object,default:null}},data:function(){return{clicked:!1}},methods:{allowedToRerun:function(){return!(!this.user.active||!this.bot||"failed"!==this.bot.botStatus&&"canceled"!==this.bot.botStatus)},rerun:function(e){this.user.active&&this.axios.post("/api/pipelines/".concat(this.bot.repoSource,"/").concat(this.bot.repoOwner,"/").concat(this.bot.repoName,"/bots"),this.bot).then((function(e){})).catch((function(e){console.warn(e)}))}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,s.rn)("user",{user:"me"}))},f=h,m=(0,r(1900).Z)(f,i,[],!1,null,null,null).exports},4785:function(e,t,r){r.d(t,{Z:function(){return p}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-input-group",{staticClass:"mb-3"},[r("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines based on when they're last built or released"}},[r("font-awesome-icon",{attrs:{icon:"clock"}})],1),e._v(" "),r("b-form-select",{attrs:{options:e.sinceOptions},on:{change:e.onChange},model:{value:e.mutableModel,callback:function(t){e.mutableModel=t},expression:"mutableModel"}})],1)};i._withStripped=!0;var s=r(5343),n=r(6127),a=r(7754),o=r(8947),l=r(1436),c=r(7810);o.vI.add(l.SZw);var u={components:{BFormSelect:s.K,BInputGroup:n.w,BInputGroupPrepend:a.P,FontAwesomeIcon:c.GN},props:{model:{type:String,default:null},onChange:{type:Function,default:null}},data:function(){return{sinceOptions:[{value:"1h",text:"Since 1 hour ago"},{value:"1d",text:"Since 1 day ago"},{value:"1w",text:"Since 1 week ago"},{value:"1m",text:"Since 1 month ago"},{value:"1y",text:"Since 1 year ago"},{value:"eternity",text:"Since dawn of mankind"}],mutableModel:this.model}}},p=(0,r(1900).Z)(u,i,[],!1,null,null,null).exports},2061:function(e,t,r){r.d(t,{Z:function(){return n}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"spinner-border estafette-spinner",class:e._f("bootstrapClass")(e.color,"text"),attrs:{role:"status"}},[r("span",{staticClass:"sr-only"},[e._v("Loading...")])])};i._withStripped=!0;var s={props:{color:{type:String,default:null}}},n=(0,r(1900).Z)(s,i,[],!1,null,null,null).exports},1820:function(e,t,r){r.d(t,{Z:function(){return d}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-button-group",{staticClass:"mb-3 bg-white"},[r("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines based on it's build status"}},[r("font-awesome-icon",{attrs:{icon:"check-circle"}})],1),e._v(" "),r("b-button",{class:["all"===e.filter.status?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({status:"all",page:1})},"active-class":"router-link-active",variant:"outline-primary",title:"All"},on:{click:function(e){return e.target.blur()}}},[r("font-awesome-icon",{staticClass:"d-md-none",attrs:{icon:"check-double"}}),e._v(" "),r("span",{staticClass:"d-none d-md-inline"},[e._v("\n      All\n    ")])],1),e._v(" "),r("b-button",{class:["succeeded"===e.filter.status?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({status:"succeeded",page:1})},"active-class":"router-link-active",variant:"outline-success",title:"Succeeded"},on:{click:function(e){return e.target.blur()}}},[r("font-awesome-icon",{staticClass:"d-md-none",attrs:{icon:"heart"}}),e._v(" "),r("span",{staticClass:"d-none d-md-inline"},[e._v("\n      Succeeded\n    ")])],1),e._v(" "),r("b-button",{class:["failed"===e.filter.status?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({status:"failed",page:1})},"active-class":"router-link-active",variant:"outline-danger",title:"Failed"},on:{click:function(e){return e.target.blur()}}},[r("font-awesome-icon",{staticClass:"d-md-none",attrs:{icon:"heart-broken"}}),e._v(" "),r("span",{staticClass:"d-none d-md-inline"},[e._v("\n      Failed\n    ")])],1),e._v(" "),r("b-button",{class:["running"===e.filter.status?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({status:"running",page:1})},"active-class":"router-link-active",variant:"outline-warning",title:"Running"},on:{click:function(e){return e.target.blur()}}},[r("font-awesome-icon",{staticClass:"d-md-none",attrs:{icon:"running"}}),e._v(" "),r("span",{staticClass:"d-none d-md-inline"},[e._v("\n      Running\n    ")])],1),e._v(" "),r("b-button",{class:["canceled"===e.filter.status?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({status:"canceled",page:1})},"active-class":"router-link-active",variant:"outline-secondary",title:"Canceled"},on:{click:function(e){return e.target.blur()}}},[r("font-awesome-icon",{staticClass:"d-md-none",attrs:{icon:"ban"}}),e._v(" "),r("span",{staticClass:"d-none d-md-inline"},[e._v("\n      Canceled\n    ")])],1)],1)};i._withStripped=!0;var s=r(5969),n=r(5193),a=r(7754),o=r(3209),l=r(8947),c=r(1436),u=r(7810);l.vI.add(c.f8k,c.FFp,c.Bxq,c.m6i,c.FTC,c.gPx);var p={components:{BButtonGroup:s.a,BButton:n.T,BInputGroupPrepend:a.P,FontAwesomeIcon:u.GN},mixins:[o.Z],props:{filter:{type:Object,default:null}}},d=(0,r(1900).Z)(p,i,[],!1,null,null,null).exports},2366:function(e,t,r){r.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row-header"},e._l(e.fields,(function(t){return r("div",{key:t.name,class:t.class},[t.isSortable?r("router-link",{staticClass:"clickable",attrs:{to:{query:e.queryGenerator(t.sortingQueryParams)},"active-class":"router-link-active",tag:"span"}},[e._v("\n      "+e._s(t.name)+"\n      "),r("font-awesome-icon",{attrs:{icon:"sort"}})],1):r("span",[e._v("\n      "+e._s(t.name)+"\n    ")])],1)})),0)};i._withStripped=!0;var s=r(3209),n=r(8947),a=r(1436),o=r(7810);n.vI.add(a.CmM);var l={components:{FontAwesomeIcon:o.GN},mixins:[s.Z],props:{fields:{type:Array,default:function(){return[]}}}},c=(0,r(1900).Z)(l,i,[],!1,null,null,null).exports},2725:function(e,t,r){r.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.events&&e.events.length>0?r("div",e._l(e.events,(function(t,i){return r("div",{key:i},[t.pipeline?r("div",{attrs:{title:t.pipeline.repoSource+" / "+t.pipeline.repoOwner+" / "+t.pipeline.repoName}},[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"tools"}}),e._v(" "),r("router-link",{staticClass:"text-body",attrs:{to:{name:"PipelineOverview",params:{repoSource:t.pipeline.repoSource,repoOwner:t.pipeline.repoOwner,repoName:t.pipeline.repoName}}}},[e._v("\n        "+e._s(t.pipeline.repoSource)+"/"+e._s(t.pipeline.repoOwner)+"/"+e._s(t.pipeline.repoName)+"\n      ")])],1):e._e(),e._v(" "),t.release?r("div",{attrs:{title:t.release.repoSource+" / "+t.release.repoOwner+" / "+t.release.repoName}},[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"upload"}}),e._v(" "),r("router-link",{staticClass:"text-body",attrs:{to:{name:"PipelineReleases",params:{repoSource:t.release.repoSource,repoOwner:t.release.repoOwner,repoName:t.release.repoName}}}},[e._v("\n        "+e._s(t.release.repoSource)+"/"+e._s(t.release.repoOwner)+"/"+e._s(t.release.repoName)+"\n      ")])],1):e._e(),e._v(" "),t.git?r("div",{attrs:{title:t.git.repository}},[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"code-branch"}}),e._v(" "),r("a",{staticClass:"text-body",attrs:{href:"https://"+t.git.repository,target:"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n        "+e._s(t.git.repository)+"\n      ")])],1):e._e(),e._v(" "),t.github?r("div",{attrs:{title:t.github.repository}},[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:["fab","github"]}}),e._v(" "),e._v("\n      "+e._s(t.github.event)+"\n    ")],1):e._e(),e._v(" "),t.bitbucket?r("div",{attrs:{title:t.bitbucket.repository}},[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:["fab","bitbucket"]}}),e._v(" "),e._v("\n      "+e._s(t.bitbucket.event)+"\n    ")],1):e._e(),e._v(" "),t.pubsub?r("div",{attrs:{title:"projects/"+t.pubsub.project+"/topics/"+t.pubsub.topic}},[r("h6",[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"bezier-curve"}}),e._v("\n        projects/"+e._s(t.pubsub.project)+"/topics/"+e._s(t.pubsub.topic)+"\n      ")],1)]):e._e(),e._v(" "),t.docker?r("div"):e._e(),e._v(" "),t.cron?r("div",{attrs:{title:t.cron.time}},[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"clock"}}),e._v("\n      "+e._s(t.cron.time)+"\n    ")],1):e._e(),e._v(" "),t.manual?r("div",{attrs:{title:t.manual.userID}},[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"user-circle"}}),e._v("\n      "+e._s(t.manual.userID)+"\n    ")],1):e._e()])})),0):e._e()};i._withStripped=!0;var s=r(8947),n=r(1436),a=r(1417),o=r(7810);s.vI.add(n.CgH,n.cf$,n.m08,n.SZw,n.mh3,n.izv,a.zhw,a.KOC);var l={components:{FontAwesomeIcon:o.GN},props:{events:{type:Array,default:null}}},c=(0,r(1900).Z)(l,i,[],!1,null,null,null).exports},1514:function(e,t,r){r.d(t,{Z:function(){return n}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-alert",{staticClass:"d-flex flex-row h-100",attrs:{variant:e.$options.filters.bootstrapVariant(this.warning.status),show:""}},[r("mark-down",[e._v(e._s(e.warning.message))])],1)};i._withStripped=!0;var s={components:{BAlert:r(3106).F,MarkDown:function(){return Promise.all([r.e(441),r.e(41)]).then(r.bind(r,9974))}},props:{warning:{type:Object,default:null}}},n=(0,r(1900).Z)(s,i,[],!1,null,null,null).exports},4013:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form",{staticClass:"rounded border bg-white p-3",attrs:{autocomplete:"off"},on:{submit:e.onSubmit}},[r("b-form-group",{attrs:{description:"Required for use as a Kubernetes secret."}},[r("b-form-checkbox",{attrs:{id:"base64"},model:{value:e.form.base64,callback:function(t){e.$set(e.form,"base64",t)},expression:"form.base64"}},[e._v("\n        Base64 encode\n      ")])],1),e._v(" "),e.showDoubleEncrypt?r("b-form-group",{attrs:{description:"To encrypt the secret envelope a second time for injecting it into Estafette's configmap."}},[r("b-form-checkbox",{attrs:{id:"double"},model:{value:e.form.double,callback:function(t){e.$set(e.form,"double",t)},expression:"form.double"}},[e._v("\n        Double encrypt\n      ")])],1):e._e(),e._v(" "),r("b-form-group",{attrs:{label:"Pipeline restriction regex","label-for":"pipelineAllowList",description:"The pipeline to restrict decryption of the secret for."}},[r("b-form-input",{attrs:{id:"pipelineAllowList",readonly:e.pipelineAllowListReadonly,type:"text"},model:{value:e.form.pipelineAllowList,callback:function(t){e.$set(e.form,"pipelineAllowList",t)},expression:"form.pipelineAllowList"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"Value to encrypt","label-for":"value",description:"The encrypted secret works only for this Estafette CI installation. Try to avoid newlines, this can cause errors during pipeline execution."}},[r("b-form-textarea",{staticClass:"border bg-light",attrs:{id:"value",placeholder:"Paste your value to be encrypted",rows:5},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1),e._v(" "),r("b-button",{staticClass:"mt-3",attrs:{type:"submit",variant:"primary"}},[e._v("\n      Encrypt\n    ")])],1),e._v(" "),e.encrypting?r("div",[r("spinner",{attrs:{color:"secondary"}})],1):e._e(),e._v(" "),e.secret?r("div",{staticClass:"mt-4"},[r("h5",[e._v("Use this in your manifest to hide secrets in plain sight!")]),e._v(" "),r("div",{staticClass:"pre-wrapper"},[r("pre",{staticClass:"bg-light p-3"},[r("code",[e._v(e._s(e.secret))])]),e._v(" "),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.click",modifiers:{click:!0}}],staticClass:"btn-clipboard",attrs:{title:"Copied!"},on:{click:e.copy}},[e._v("\n        Copy\n      ")])],1)]):e._e()],1)};i._withStripped=!0;var s=r(2061),n=r(4909),a=r(4951),o=r(2183),l=r(5302),c=r(4058),u=r(5193),p=r(8365),d={components:{spinner:s.Z,BForm:n.e,BFormCheckbox:a.l,BFormInput:o.e,BFormTextarea:l.y,BFormGroup:c.x,BButton:u.T},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},pipeline:{type:Object,default:null}},directives:{BTooltip:p.T},data:function(){return{form:{base64:!1,double:!1,pipelineAllowList:null!==this.repoSource&&null!==this.repoOwner&&null!==this.repoName?"".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName):".*",value:null},pipelineAllowListReadonly:"AdminSecrets"!==this.$route.name,showDoubleEncrypt:"AdminSecrets"===this.$route.name,encrypting:!1,secret:null}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),this.encrypting=!0,this.axios.post("/api/manifest/encrypt",this.form).then((function(e){t.encrypting=!1,t.secret=e.data.secret,window.scrollTo(0,document.body.scrollHeight)})).catch((function(e){t.encrypting=!1,console.warn(e)}))},copy:function(){var e=document.createElement("textarea");e.value=this.secret,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}},h=(0,r(1900).Z)(d,i,[],!1,null,"3cb51fff",null).exports},4677:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-xxl-8"},[r("status-filter",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2"}),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2 text-right"},[r("since-selector",{attrs:{model:e.filter.since,"on-change":e.setSince}})],1)]),e._v(" "),r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-lg-9"}),e._v(" "),r("div",{staticClass:"d-none d-lg-block col-12 col-lg-3 text-right"},[r("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),r("transition-group-header",{staticClass:"ml-3 mr-3",attrs:{fields:e.fields}}),e._v(" "),e.bots.length>0?r("transition-group",{staticClass:"ml-3 mr-3",attrs:{name:"list-complete",tag:"div"}},e._l(e.bots,(function(e){return r("bot-row",{key:e.id,attrs:{bot:e,"all-bots-mode":!0}})})),1):e.loaded?r("div",{staticClass:"alert alert-warning text-center p-5"},[e._v("\n    There are no bots for the current filters. Please change your filters!\n  ")]):r("div",[r("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.bots.length>0?r("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(2061),a=r(2326),o=r(1820),l=r(4785),c=r(1893),u=r(5106),p=r(2366);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={components:{Spinner:n.Z,Pagination:a.Z,StatusFilter:o.Z,SinceSelector:l.Z,BotRow:c.Z,PaginationCompact:u.Z,TransitionGroupHeader:p.Z},props:{query:{type:Object,default:null}},data:function(){return{bots:[],pagination:{page:1,size:10,totalPages:0,totalItems:0},filter:{status:"all",target:"",since:"1d"},sort:"-updated_at",fields:[{name:"Pipeline",class:"col-2",isSortable:!0,sortingQueryParams:{sort:"repo_source,repo_owner,repo_name"}},{name:"Bot",class:"col-2"},{name:"Status",class:"col-2"},{name:"Executed",class:"col-2",isSortable:!0,sortingQueryParams:{sort:"-updated_at"}},{name:"Triggered by",class:"col-4"}],loaded:!1,refresh:!0}},created:function(){this.filterDefaults=h({},this.filter),this.sortDefaults=this.sort,this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadBots()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=h({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.filter&&this.filter.target&&""!==this.filter.target?e.target=this.filter.target:e.target&&delete e.target,this.filter&&this.filter.since&&""!==this.filter.since?e.since=this.filter.since:e.since&&delete e.since,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,this.sort?e.sort=this.sort:e.sort&&delete e.sort,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status,this.filter.target=e&&e.target?e.target:this.filterDefaults.target,this.filter.since=e&&e.since?e.since:this.filterDefaults.since,this.sort=e&&e.sort?e.sort:this.sortDefaults},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadBots:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling"),this.axios.get("/api/bots?".concat(t,"&filter[target]=").concat(this.filter.target,"&filter[since]=").concat(this.filter.since,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size,"&sort=").concat(this.sort)).then((function(t){e.bots=t.data.items,e.pagination=t.data.pagination,e.loaded=!0,e.periodicallyRefreshBot(15)})).catch((function(t){e.periodicallyRefreshBot(15)}))},periodicallyRefreshBot:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBots,i))},setTarget:function(e){this.filter.target=e,this.pagination.page=1,this.updateQueryParams()},setSince:function(e){this.filter.since=e,this.pagination.page=1,this.updateQueryParams()}},computed:h({},(0,s.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadBots()},pipeline:{handler:function(e,t){this.loadBots()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},b=(0,r(1900).Z)(m,i,[],!1,null,"0e9099de",null).exports},954:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-xxl-8"},[r("status-filter",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2"},[r("frequent-labels",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2 text-right"},[r("since-selector",{attrs:{model:e.filter.since,"on-change":e.setSince}})],1)]),e._v(" "),r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-lg-9"},[r("label-filter",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"d-none d-lg-block col-12 col-lg-3 text-right"},[r("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),r("transition-group-header",{staticClass:"ml-3 mr-3",attrs:{fields:e.fields}}),e._v(" "),e.builds.length>0?r("transition-group",{staticClass:"ml-3 mr-3",attrs:{name:"list-complete",tag:"div"}},e._l(e.builds,(function(t){return r("build-row",{key:t.id,attrs:{build:t,builds:e.builds,"all-builds-mode":!0}})})),1):e.loaded?r("div",{staticClass:"alert alert-warning text-center p-5"},[e._v("\n    There are no builds for the current filters. Please change your filters!\n  ")]):r("div",[r("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.builds.length>0?r("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(2061),a=r(1820),o=r(4785),l=r(3555),c=r(3565),u=r(5106),p=r(7369),d=r(2326),h=r(2366);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={components:{Spinner:n.Z,StatusFilter:a.Z,SinceSelector:o.Z,LabelFilter:l.Z,FrequentLabels:c.Z,PaginationCompact:u.Z,BuildRow:p.Z,Pagination:d.Z,TransitionGroupHeader:h.Z},props:{query:{type:Object,default:null}},data:function(){return{builds:[],pagination:{page:1,size:10,totalPages:0,totalItems:0},filter:{status:"all",since:"1d",labels:""},sort:"-updated_at",fields:[{name:"Pipeline",class:"col-3",isSortable:!0,sortingQueryParams:{sort:"repo_source,repo_owner,repo_name"}},{name:"Version",class:"col-2"},{name:"Status",class:"col-1"},{name:"Built",class:"col-2",isSortable:!0,sortingQueryParams:{sort:"-updated_at"}},{name:"Branch",class:"col-1"},{name:"Revision",class:"col-1"},{name:"Commit(s)",class:"col-2"}],loaded:!1,refresh:!0}},created:function(){this.filterDefaults=m({},this.filter),this.sortDefaults=this.sort,this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadBuilds()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=m({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.filter&&this.filter.since&&""!==this.filter.since?e.since=this.filter.since:e.since&&delete e.since,this.filter&&this.filter.labels&&""!==this.filter.labels?e.labels=this.filter.labels:e.labels&&delete e.labels,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,this.sort?e.sort=this.sort:e.sort&&delete e.sort,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status,this.filter.since=e&&e.since?e.since:this.filterDefaults.since,this.filter.labels=e&&e.labels?e.labels:this.filterDefaults.labels,this.sort=e&&e.sort?e.sort:this.sortDefaults},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadBuilds:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling");var r="";this.filter&&this.filter.labels&&this.filter.labels.length>0&&(r=this.filter.labels.split(",").join("&filter[labels]=")),this.axios.get("/api/builds?".concat(t,"&filter[since]=").concat(this.filter.since,"&filter[labels]=").concat(r,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size,"&sort=").concat(this.sort)).then((function(t){e.builds=t.data.items,e.pagination=t.data.pagination,e.loaded=!0,e.periodicallyRefreshBuilds(15)})).catch((function(t){e.periodicallyRefreshBuilds(15)}))},periodicallyRefreshBuilds:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBuilds,i))},setSince:function(e){this.filter.since=e,this.pagination.page=1,this.updateQueryParams()}},computed:m({},(0,s.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadBuilds()},pipeline:{handler:function(e,t){this.loadBuilds()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},v=(0,r(1900).Z)(g,i,[],!1,null,null,null).exports},5919:function(e,t,r){r.r(t),r.d(t,{default:function(){return I}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-lg-6 col-xxl-4"},[r("status-filter",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2"},[r("pipeline-filter",{attrs:{model:e.filter.search,"on-input":e.setSearch}})],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2"},[r("release-target-filter",{attrs:{mode:"pipelines",filter:e.filter,model:e.filter.target,"on-change":e.setTarget}})],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2"},[r("frequent-labels",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2 text-right"},[r("since-selector",{attrs:{model:e.filter.since,"on-change":e.setSince}})],1)]),e._v(" "),r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-lg-9"},[r("user-filter",{attrs:{filter:e.filter}}),e._v(" "),r("label-filter",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"d-none d-lg-block col-12 col-lg-3 text-right"},[r("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),r("transition-group-header",{staticClass:"ml-3 mr-3",attrs:{fields:e.fields}}),e._v(" "),e.pipelines.length>0?r("transition-group",{staticClass:"ml-3 mr-3",attrs:{name:"list-complete",tag:"div"}},e._l(e.pipelines,(function(t){return r("pipeline-row",{key:t.repoSource+"/"+t.repoOwner+"/"+t.repoName,attrs:{pipeline:t,filter:e.filter}})})),1):e.loaded?r("div",{staticClass:"alert alert-warning text-center p-5 m-3"},[e._v("\n    There are no pipelines for the current filters. Please increase the time range or remove some filters!\n  ")]):r("div",[r("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.pipelines.length>0?r("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(3279),a=r.n(n),o=r(3209),l=r(2061),c=r(2571),u=r(1820),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user&&e.user.active?r("b-button-group",{staticClass:"mb-3 bg-white"},[r("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines you recently committed to or released"}},[r("font-awesome-icon",{attrs:{icon:"user"}})],1),e._v(" "),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["false"===e.filter.recentCommitter&&"false"===e.filter.recentReleaser?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({recentCommitter:"false",recentReleaser:"false",page:1})},"active-class":"router-link-active",variant:"light",title:"Everyone's pipelines"},on:{click:function(e){return e.target.blur()}}},[r("font-awesome-icon",{attrs:{icon:"users"}})],1),e._v(" "),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["true"===e.filter.recentCommitter?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({recentCommitter:"true",recentReleaser:"false",page:1})},"active-class":"router-link-active",variant:"light",title:"Pipelines you recently committed to"},on:{click:function(e){return e.target.blur()}}},[r("font-awesome-icon",{attrs:{icon:"tools"}})],1),e._v(" "),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["true"===e.filter.recentReleaser?"active":"border-btn-group"],attrs:{to:{query:e.queryGenerator({recentCommitter:"false",recentReleaser:"true",page:1})},"active-class":"router-link-active",variant:"light",title:"Pipelines you recently released"},on:{click:function(e){return e.target.blur()}}},[r("font-awesome-icon",{attrs:{icon:"upload"}})],1)],1):e._e()};p._withStripped=!0;var d=r(5969),h=r(5193),f=r(7754),m=r(8947),b=r(1436),g=r(7810);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}m.vI.add(b.ILF,b.FVb,b.CgH,b.cf$);var _={components:{BButtonGroup:d.a,BButton:h.T,BInputGroupPrepend:f.P,FontAwesomeIcon:g.GN},mixins:[o.Z],props:{filter:{type:Object,default:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,s.rn)("user",{user:"me"}))},w=_,S=r(1900),O=(0,S.Z)(w,p,[],!1,null,null,null).exports,x=r(3555),C=r(3565),P=r(3060),T=r(7339),j=r(4785),D=r(5106),k=r(2326),B=r(2366);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L={components:{Spinner:l.Z,PipelineRow:c.Z,StatusFilter:u.Z,UserFilter:O,LabelFilter:x.Z,FrequentLabels:C.Z,PipelineFilter:P.Z,ReleaseTargetFilter:T.Z,SinceSelector:j.Z,PaginationCompact:D.Z,Pagination:k.Z,TransitionGroupHeader:B.Z},mixins:[o.Z],props:{query:{type:Object,default:null}},data:function(){return{pipelines:[],pagination:{page:1,size:12,totalPages:0,totalItems:0},filter:{status:"all",target:"",since:"1d",labels:"",search:"",recentCommitter:"false",recentReleaser:"false"},sort:"repo_source,repo_owner,repo_name",fields:[{name:"Pipeline",class:"col-3",isSortable:!0,sortingQueryParams:{sort:"repo_source,repo_owner,repo_name"}},{name:"Version",class:"col-1"},{name:"Status",class:"col-1"},{name:"Built",class:"col-2",isSortable:!0,sortingQueryParams:{sort:"-last_updated_at"}},{name:"Branch",class:"col-1"},{name:"Revision",class:"col-1"},{name:"Commit(s)",class:"col-3"}],loaded:!1,refresh:!0}},created:function(){this.filterDefaults=R({},this.filter),this.sortDefaults=this.sort,this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadPipelines()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=R({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.filter&&this.filter.target&&""!==this.filter.target?e.target=this.filter.target:e.target&&delete e.target,this.filter&&this.filter.since&&""!==this.filter.since?e.since=this.filter.since:e.since&&delete e.since,this.filter&&this.filter.search&&""!==this.filter.search?e.search=this.filter.search:e.search&&delete e.search,this.filter&&this.filter.labels&&""!==this.filter.labels?e.labels=this.filter.labels:e.labels&&delete e.labels,this.filter&&this.filter.recentCommitter&&""!==this.filter.recentCommitter?e.recentCommitter=this.filter.recentCommitter:e.recentCommitter&&delete e.recentCommitter,this.filter&&this.filter.recentReleaser&&""!==this.filter.recentReleaser?e.recentReleaser=this.filter.recentReleaser:e.recentReleaser&&delete e.recentReleaser,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,this.sort?e.sort=this.sort:e.sort&&delete e.sort,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status,this.filter.target=e&&e.target?e.target:this.filterDefaults.target,this.filter.since=e&&e.since?e.since:this.filterDefaults.since,this.filter.labels=e&&e.labels?e.labels:this.filterDefaults.labels,this.filter.search=e&&e.search?e.search:this.filterDefaults.search,this.filter.recentCommitter=e&&e.recentCommitter?e.recentCommitter:this.filterDefaults.recentCommitter,this.filter.recentReleaser=e&&e.recentReleaser?e.recentReleaser:this.filterDefaults.recentReleaser,this.sort=e&&e.sort?e.sort:this.sortDefaults},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadPipelines:function(){var e=this,t="";this.filter&&this.filter.labels&&this.filter.labels.length>0&&(t=this.filter.labels.split(",").join("&filter[labels]="));var r="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(r+="&filter[status]=pending&filter[status]=canceling");var i="&sort=".concat(this.sort),s="";this.user&&this.user.active&&this.filter&&"true"===this.filter.recentCommitter&&(s="&filter[recent-committer]=".concat(this.user.email),i="&sort=-last_updated_at,repo_source,repo_owner,repo_name");var n="";this.user&&this.user.active&&this.filter&&"true"===this.filter.recentReleaser&&(n="&filter[recent-releaser]=".concat(this.user.email),i="&sort=-last_updated_at,repo_source,repo_owner,repo_name"),this.axios.get("/api/pipelines?".concat(r).concat(s).concat(n,"&filter[since]=").concat(this.filter.since,"&filter[target]=").concat(this.filter.target,"&filter[search]=").concat(this.filter.search,"&filter[labels]=").concat(t,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size).concat(i)).then((function(t){e.pipelines=t.data.items,e.pagination=t.data.pagination,e.loaded=!0,e.periodicallyRefreshPipelines(5)})).catch((function(t){e.periodicallyRefreshPipelines(30)}))},periodicallyRefreshPipelines:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadPipelines,i))},setTarget:function(e){this.filter.target=e,this.pagination.page=1,this.updateQueryParams()},setSince:function(e){this.filter.since=e,this.pagination.page=1,this.updateQueryParams()},setSearch:a()((function(e){this.filter.search=e,this.pagination.page=1,this.updateQueryParams()}),500)},computed:R({},(0,s.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadPipelines()}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},I=(0,S.Z)(L,i,[],!1,null,null,null).exports},9693:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-xxl-8"},[r("status-filter",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2"},[r("release-target-filter",{attrs:{mode:"releases",filter:e.filter,model:e.filter.target,"on-change":e.setTarget}})],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6 col-xxl-2 text-right"},[r("since-selector",{attrs:{model:e.filter.since,"on-change":e.setSince}})],1)]),e._v(" "),r("div",{staticClass:"row m-0"},[r("div",{staticClass:"col-12 col-lg-9"}),e._v(" "),r("div",{staticClass:"d-none d-lg-block col-12 col-lg-3 text-right"},[r("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),r("transition-group-header",{staticClass:"ml-3 mr-3",attrs:{fields:e.fields}}),e._v(" "),e.releases.length>0?r("transition-group",{staticClass:"ml-3 mr-3",attrs:{name:"list-complete",tag:"div"}},e._l(e.releases,(function(e){return r("release-row",{key:e.id,attrs:{release:e,"all-releases-mode":!0}})})),1):e.loaded?r("div",{staticClass:"alert alert-warning text-center p-5"},[e._v("\n    There are no releases for the current filters. Please change your filters!\n  ")]):r("div",[r("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.releases.length>0?r("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(2061),a=r(2326),o=r(1820),l=r(4785),c=r(7339),u=r(5025),p=r(5106),d=r(2366);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={components:{Spinner:n.Z,Pagination:a.Z,StatusFilter:o.Z,SinceSelector:l.Z,ReleaseTargetFilter:c.Z,ReleaseRow:u.Z,PaginationCompact:p.Z,TransitionGroupHeader:d.Z},props:{query:{type:Object,default:null}},data:function(){return{releases:[],pagination:{page:1,size:10,totalPages:0,totalItems:0},filter:{status:"all",target:"",since:"1d"},sort:"-updated_at",fields:[{name:"Pipeline",class:"col-2",isSortable:!0,sortingQueryParams:{sort:"repo_source,repo_owner,repo_name"}},{name:"Target",class:"col-2"},{name:"Version",class:"col-2"},{name:"Status",class:"col-2"},{name:"Released",class:"col-2",isSortable:!0,sortingQueryParams:{sort:"-updated_at"}},{name:"Triggered by",class:"col-2"}],loaded:!1,refresh:!0}},created:function(){this.filterDefaults=f({},this.filter),this.sortDefaults=this.sort,this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadReleases()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=f({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.filter&&this.filter.target&&""!==this.filter.target?e.target=this.filter.target:e.target&&delete e.target,this.filter&&this.filter.since&&""!==this.filter.since?e.since=this.filter.since:e.since&&delete e.since,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,this.sort?e.sort=this.sort:e.sort&&delete e.sort,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status,this.filter.target=e&&e.target?e.target:this.filterDefaults.target,this.filter.since=e&&e.since?e.since:this.filterDefaults.since,this.sort=e&&e.sort?e.sort:this.sortDefaults},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadReleases:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling"),this.axios.get("/api/releases?".concat(t,"&filter[target]=").concat(this.filter.target,"&filter[since]=").concat(this.filter.since,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size,"&sort=").concat(this.sort)).then((function(t){e.releases=t.data.items,e.pagination=t.data.pagination,e.loaded=!0,e.periodicallyRefreshRelease(15)})).catch((function(t){e.periodicallyRefreshRelease(15)}))},periodicallyRefreshRelease:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadReleases,i))},setTarget:function(e){this.filter.target=e,this.pagination.page=1,this.updateQueryParams()},setSince:function(e){this.filter.since=e,this.pagination.page=1,this.updateQueryParams()}},computed:f({},(0,s.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadReleases()},pipeline:{handler:function(e,t){this.loadReleases()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},g=(0,r(1900).Z)(b,i,[],!1,null,"6e2e3118",null).exports},9819:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section-header",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),r("b-breadcrumb",{staticClass:"m-3 rounded",attrs:{items:e.breadcrumbs}}),e._v(" "),e.bot?r("bot-header",{attrs:{bot:e.bot,pipeline:!e.pipeline||"pending"!==e.bot.botStatus&&"running"!==e.bot.botStatus?e.bot:e.pipeline}}):e._e(),e._v(" "),r("inner-navigation-tabs",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),e.bot?r("router-view",{staticClass:"m-3",attrs:{bot:e.bot}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(6578),a=r(9367),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header-block"},[r("property-block",{attrs:{label:"Bot",variant:"success",title:""}},[r("repository-title",{attrs:{repo:e.bot}})],1),e._v(" "),r("property-block",{attrs:{label:"Bot",value:e.bot.name}},[e._v("\n    "+e._s(e.bot.name)+"\n  ")]),e._v(" "),r("property-block",{attrs:{label:"Status"}},[r("b-progress",[r("b-progress-bar",{attrs:{value:e.$options.filters.botProgressBarValue(e.pipeline,e.bot,e.now),label:e.$options.filters.botProgressBarLabel(e.pipeline,e.bot,e.now),variant:e.$options.filters.bootstrapVariant(e.bot.botStatus),animated:e.$options.filters.animatedProgressBar(e.bot.botStatus)}})],1)],1),e._v(" "),r("property-block",{attrs:{label:"Executed"}},[e._v("\n    "+e._s(e._f("formatDatetime")(e.bot.insertedAt))+"\n    "),r("duration-label",{attrs:{duration:e.bot.duration,"pending-duration":e.bot.pendingDuration}})],1),e._v(" "),r("property-block",{attrs:{label:"Triggered by"}},[r("triggered-by",{attrs:{events:e.bot.triggerEvents}})],1),e._v(" "),e.showActions?r("property-block",{attrs:{label:"Actions"}},[r("cancel-button",{attrs:{bot:e.bot}}),e._v(" "),r("rerun-button",{attrs:{bot:e.bot}})],1):e._e()],1)};o._withStripped=!0;var l=r(5752),c=r(2981),u=r(2874),p=r(6139),d=r(2725),h=r(1033),f=r(8402),m=r(5689),b=r(6546);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={components:{BProgress:l.D,BProgressBar:c.Q,CancelButton:u.Z,RerunButton:p.Z,TriggeredBy:d.Z,PropertyBlock:h.Z,RepositoryTitle:f.Z,DurationLabel:m.Z},props:{bot:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{now:Date.now()}},created:function(){this.updateNow()},methods:{updateNow:function(){this.now=Date.now(),!this.bot||"pending"!==this.bot.botStatus&&"running"!==this.bot.botStatus||b.Z.timeout(this.timeout,this.updateNow,1)}},beforeDestroy:function(){clearTimeout(this.timeout)},computed:v(v({},(0,s.rn)("user",{user:"me"})),{},{showActions:function(){return this.user&&this.user.active&&this.bot&&("failed"===this.bot.botStatus||"pending"===this.bot.botStatus||"running"===this.bot.botStatus||"canceled"===this.bot.botStatus||"canceling"===this.bot.botStatus)}})},w=r(1900),S=(0,w.Z)(_,o,[],!1,null,null,null).exports,O=r(4740);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P={components:{BBreadcrumb:n.P,SectionHeader:a.Z,BotHeader:S,InnerNavigationTabs:O.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},botID:{type:String,default:null}},data:function(){return{bot:null,pipeline:null,refresh:!0,breadcrumbs:[{text:"Builds & bots",to:{name:"Pipelines"}},{text:"".concat(this.repoName),to:{name:"PipelineOverview",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"bots",to:{name:"PipelineBots",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"..."}]}},created:function(){this.loadBot()},methods:{loadBot:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/bots/").concat(this.botID)).then((function(t){e.bot=t.data,"pending"!==e.bot.botStatus&&"running"!==e.bot.botStatus||e.loadPipeline(),e.breadcrumbs[e.breadcrumbs.length-1]={text:"".concat(e.bot.name),to:{name:"PipelineBotLogs",params:{repoSource:e.repoSource,repoOwner:e.repoOwner,repoName:e.repoName,botID:e.botID}},active:!0},"succeeded"!==e.bot.botStatus&&"failed"!==e.bot.botStatus?e.periodicallyRefreshBot(5):e.periodicallyRefreshBot(15)})).catch((function(t){e.periodicallyRefreshBot(30)}))},loadPipeline:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName)).then((function(t){e.pipeline=t.data})).catch((function(e){console.warn(e)}))},periodicallyRefreshBot:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBot,i))},sortLabels:function(e){return e?e.slice().sort((function(e,t){return e.key>t.key})):e}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,s.rn)("user",{user:"me"})),beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},T=P,j=(0,w.Z)(T,i,[],!1,null,null,null).exports},7335:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"col-12 text-center"},[r("log-navigation",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/bots/"+this.botID+"/alllogs",status:this.bot.botStatus,logid:e.logid}})],1),e._v(" "),e.logid?r("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/bots/"+this.botID+"/logsbyid/"+this.logid,status:this.bot.botStatus,"allow-tail":!1}}):"pending"===e.bot.botStatus||"running"===e.bot.botStatus||"canceling"===e.bot.botStatus?r("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/bots/"+this.botID+"/logs",status:this.bot.botStatus,"allow-tail":!0}}):e._e()],1)};i._withStripped=!0;var s=r(1247),n=r(8167),a={components:{LogNavigation:s.Z,LogViewer:n.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},botID:{type:String,default:null},logid:{type:String,default:null},bot:{type:Object,default:null}}},o=(0,r(1900).Z)(a,i,[],!1,null,null,null).exports},2574:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-3"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-lg-3"},[r("bot-name-filter",{attrs:{filter:e.filter,model:e.filter.bot,"on-change":e.setBot,pipeline:e.pipeline}})],1),e._v(" "),r("div",{staticClass:"col-7 col-lg-6 text-lg-center"},[r("status-filter",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"col-5 col-lg-3"},[r("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),r("div",{staticClass:"row-header"},[r("div",{staticClass:"col-2"},[e._v("\n      Bot\n    ")]),e._v(" "),r("div",{staticClass:"col-2"},[e._v("\n      Status\n    ")]),e._v(" "),r("div",{staticClass:"col-2"},[e._v("\n      Executed\n    ")]),e._v(" "),r("div",{staticClass:"col-4"},[e._v("\n      Triggered by\n    ")]),e._v(" "),e.user&&e.user.active?r("div",{staticClass:"col-2"},[e._v("\n      Actions\n    ")]):e._e()]),e._v(" "),e.bots.length>0?r("transition-group",{attrs:{name:"list-complete",tag:"div"}},e._l(e.bots,(function(t){return r("bot-row",{key:t.id,attrs:{bot:t,pipeline:e.pipeline}})})),1):e.loaded?r("div",{staticClass:"alert alert-warning text-center p-5"},[e._v("\n    There are no bots for the current filters. Please change your filters!\n  ")]):r("div",[r("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.bots.length>0?r("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(2061),a=r(2326),o=r(1820),l=r(1893),c=r(5106),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-input-group",{staticClass:"mb-3"},[r("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter bots on their name"}},[r("font-awesome-icon",{attrs:{icon:"robot"}})],1),e._v(" "),r("b-form-select",{attrs:{options:e.botNameOptions},on:{change:e.onChange},model:{value:e.mutableModel,callback:function(t){e.mutableModel=t},expression:"mutableModel"}})],1)};u._withStripped=!0;var p=r(5343),d=r(6127),h=r(7754),f=r(8947),m=r(1436),b=r(7810);f.vI.add(m.VE0);var g={components:{BFormSelect:p.K,BInputGroup:d.w,BInputGroupPrepend:h.P,FontAwesomeIcon:b.GN},props:{pipeline:{type:Object,default:null},filter:{type:Object,default:null},model:{type:String,default:null},onChange:{type:Function,default:null}},data:function(){return{bots:[],pagination:{page:1,size:15},refresh:!0,mutableModel:this.model}},created:function(){this.loadBotNames()},methods:{loadBotNames:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling"),this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/botnames?").concat(t,"&filter[since]=1m&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.bots=t.data.items,e.periodicallyRefreshBotNames(5)})).catch((function(t){e.periodicallyRefreshBotNames(30)}))},periodicallyRefreshBotNames:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBotNames,i))}},watch:{filter:{handler:function(e,t){this.loadBotNames()},deep:!0}},computed:{botNameOptions:function(){var e=[{value:"",text:"All bots"}];return this.bots&&this.bots.forEach((function(t){e.push({value:t.name,text:"".concat(t.name," (").concat(t.count,")")})})),e}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},v=r(1900),y=(0,v.Z)(g,u,[],!1,null,null,null).exports;function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={components:{Spinner:n.Z,Pagination:a.Z,StatusFilter:o.Z,BotRow:l.Z,PaginationCompact:c.Z,BotNameFilter:y},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},query:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{bots:[],pagination:{page:1,size:10,totalPages:0,totalItems:0},filter:{status:"all",bot:""},loaded:!1,refresh:!0}},created:function(){this.filterDefaults=w({},this.filter),this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadBots()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=w({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.filter&&this.filter.bot&&""!==this.filter.bot?e.bot=this.filter.bot:e.bot&&delete e.bot,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status,this.filter.target=e&&e.target?e.target:this.filterDefaults.target},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadBots:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling");var r="filter[bot]=".concat(this.filter.bot);this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/bots?").concat(t,"&").concat(r,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.bots=t.data.items,e.pagination=t.data.pagination,e.loaded=!0})).catch((function(t){e.periodicallyRefreshBot(15)}))},periodicallyRefreshBot:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBots,i))},setBot:function(e){this.filter.bot=e,this.updateQueryParams()}},computed:w({},(0,s.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadBots()},pipeline:{handler:function(e,t){this.loadBots()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},x=(0,v.Z)(O,i,[],!1,null,"7e2ac98b",null).exports},3710:function(e,t,r){r.r(t),r.d(t,{default:function(){return I}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section-header",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),r("migration-notice",{attrs:{"repo-source":e.repoSource,"repo-owner":e.repoOwner,"repo-name":e.repoName,id:e.id,page:"builds"}}),e._v(" "),r("b-breadcrumb",{staticClass:"m-3 rounded",attrs:{items:e.breadcrumbs}}),e._v(" "),e.build?r("build-header",{attrs:{build:e.build,pipeline:!e.pipeline||"pending"!==e.build.buildStatus&&"running"!==e.build.buildStatus?e.build:e.pipeline}}):e._e(),e._v(" "),e.build?r("pipeline-build-warnings",{attrs:{build:e.build}}):e._e(),e._v(" "),r("inner-navigation-tabs",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),e.build?r("router-view",{staticClass:"m-3",attrs:{build:e.build}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(6578),a=r(9367),o=r(1387),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header-block"},[r("property-block",{attrs:{label:"Build",variant:"success",title:""}},[r("repository-title",{attrs:{repo:e.build}})],1),e._v(" "),r("property-block",{attrs:{label:"Version",value:e.build.buildVersion}}),e._v(" "),r("property-block",{attrs:{label:"Status",value:e.build.buildStatus}},[r("b-progress",[r("b-progress-bar",{attrs:{value:e.$options.filters.buildProgressBarValue(e.pipeline,e.build,e.now),label:e.$options.filters.buildProgressBarLabel(e.pipeline,e.build,e.now),variant:e.$options.filters.bootstrapVariant(e.build.buildStatus),animated:e.$options.filters.animatedProgressBar(e.build.buildStatus)}})],1)],1),e._v(" "),r("property-block",{attrs:{label:"Built at",value:e._f("formatDatetime")(e.build.insertedAt)}},[e._v("\n    "+e._s(e._f("formatDatetime")(e.build.insertedAt))+"\n    "),r("duration-label",{attrs:{duration:e.build.duration,"pending-duration":e.build.pendingDuration}})],1),e._v(" "),r("property-block",{attrs:{label:"Branch",value:e.build.repoBranch}}),e._v(" "),r("property-block",{attrs:{label:"Revision"}},[r("commit-link",{attrs:{build:e.build}})],1),e._v(" "),r("property-block",{attrs:{label:"Commit(s)"}},[r("commits",{attrs:{commits:e.build.commits}})],1),e._v(" "),e.showTriggers?r("property-block",{attrs:{label:"Triggered by"}},[r("triggered-by",{attrs:{events:e.build.triggerEvents}})],1):e._e(),e._v(" "),e.showActions?r("property-block",{attrs:{label:"Actions","no-truncate":""}},[r("release-button",{attrs:{pipeline:e.pipeline,build:e.build}}),e._v(" "),r("rebuild-button",{attrs:{build:e.build,builds:e.builds}}),e._v(" "),r("cancel-button",{attrs:{build:e.build}})],1):e._e(),e._v(" "),e.showReleases?r("div",{staticClass:"block-divider"},[r("div")]):e._e(),e._v(" "),e.showReleases?r("property-block",{attrs:{label:"Releases",wide:""}},e._l(e.pipeline.releaseTargets,(function(t){return r("release-badge-for-build",{key:t.name,attrs:{"release-target":t,build:e.build}})})),1):e._e()],1)};l._withStripped=!0;var c=r(5752),u=r(2981),p=r(7636),d=r(6988),h=r(5425),f=r(2874),m=r(1040),b=r(2725),g=r(1033),v=r(8402),y=r(5689),_=r(1618),w=r(6546);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C={components:{BProgress:c.D,BProgressBar:u.Q,CommitLink:p.Z,ReleaseButton:d.Z,RebuildButton:h.Z,CancelButton:f.Z,ReleaseBadgeForBuild:m.Z,TriggeredBy:b.Z,PropertyBlock:g.Z,RepositoryTitle:v.Z,DurationLabel:y.Z,Commits:_.Z},props:{build:{type:Object,default:null},builds:{type:Array,default:null},pipeline:{type:Object,default:null},rowItem:{type:Boolean,default:!1}},data:function(){return{now:Date.now()}},created:function(){this.updateNow()},methods:{updateNow:function(){this.now=Date.now(),!this.build||"pending"!==this.build.buildStatus&&"running"!==this.build.buildStatus||w.Z.timeout(this.timeout,this.updateNow,1)}},beforeDestroy:function(){clearTimeout(this.timeout)},computed:O(O({},(0,s.rn)("user",{user:"me"})),{},{showReleases:function(){var e=this;return!!(this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0)&&this.pipeline.releaseTargets.some((function(t){return t.activeReleases&&t.activeReleases.some((function(t){return t.releaseVersion===e.build.buildVersion}))}))},showActions:function(){return this.user&&this.user.active&&this.build&&("failed"===this.build.buildStatus||"pending"===this.build.buildStatus||"running"===this.build.buildStatus||"canceled"===this.build.buildStatus||"canceling"===this.build.buildStatus||this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0&&"succeeded"===this.build.buildStatus)},showTriggers:function(){return this.build.triggerEvents&&this.build.triggerEvents.length>0}})},P=r(1900),T=(0,P.Z)(C,l,[],!1,null,null,null).exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.warnings&&e.warnings.length>0?r("div",{staticClass:"col m-0 mt-3"},e._l(e.warnings,(function(e,t){return r("warning",{key:t,attrs:{warning:e}})})),1):e._e()};j._withStripped=!0;var D={components:{Warning:r(1514).Z},props:{build:{type:Object,default:null}},data:function(){return{warnings:[],refresh:!0}},created:function(){this.loadBuildWarnings()},methods:{loadBuildWarnings:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.build.repoSource,"/").concat(this.build.repoOwner,"/").concat(this.build.repoName,"/builds/").concat(this.build.id,"/warnings")).then((function(t){e.warnings=t.data.warnings})).catch((function(t){e.periodicallyRefresh(30)}))},periodicallyRefresh:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBuildWarnings,i))}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},k=(0,P.Z)(D,j,[],!1,null,null,null).exports,B=r(4740);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E={components:{BBreadcrumb:n.P,SectionHeader:a.Z,BuildHeader:T,MigrationNotice:o.Z,PipelineBuildWarnings:k,InnerNavigationTabs:B.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},id:{type:String,default:null}},data:function(){return{build:null,pipeline:null,refresh:!0,migration:null,breadcrumbs:[{text:"Builds & releases",to:{name:"Pipelines"}},{text:"".concat(this.repoName),to:{name:"PipelineOverview",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"builds",to:{name:"PipelineBuilds",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"..."}]}},created:function(){this.loadBuild()},methods:{loadBuild:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/builds/").concat(this.id)).then((function(t){e.build=t.data,"pending"!==e.build.buildStatus&&"running"!==e.build.buildStatus||e.loadPipeline(),e.breadcrumbs[e.breadcrumbs.length-1]={text:"".concat(e.build.buildVersion),to:{name:"PipelineBuildLogs",params:{repoSource:e.repoSource,repoOwner:e.repoOwner,repoName:e.repoName,id:e.id}},active:!0},"succeeded"!==e.build.buildStatus&&"failed"!==e.build.buildStatus?e.periodicallyRefreshBuild(5):e.periodicallyRefreshBuild(18e3)})).catch((function(t){console.warn(t),e.periodicallyRefreshBuild(30)}))},loadPipeline:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName)).then((function(t){e.pipeline=t.data})).catch((function(e){console.warn(e)}))},periodicallyRefreshBuild:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBuild,i))},sortLabels:function(e){return e?e.slice().sort((function(e,t){return e.key>t.key})):e}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,s.rn)("user",{user:"me"})),beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},L=E,I=(0,P.Z)(L,i,[],!1,null,null,null).exports},9507:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"col-12 text-center"},[r("log-navigation",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/builds/"+this.id+"/alllogs",status:this.build.buildStatus,logid:e.logid}})],1),e._v(" "),e.logid?r("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/builds/"+this.id+"/logsbyid/"+this.logid,status:this.build.buildStatus,"allow-tail":!1}}):"pending"===e.build.buildStatus||"running"===e.build.buildStatus||"canceling"===e.build.buildStatus?r("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/builds/"+this.id+"/logs",status:this.build.buildStatus,"allow-tail":!0}}):e._e()],1)};i._withStripped=!0;var s=r(1247),n=r(8167),a={components:{LogNavigation:s.Z,LogViewer:n.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},id:{type:String,default:null},logid:{type:String,default:null},build:{type:Object,default:null}}},o=(0,r(1900).Z)(a,i,[],!1,null,null,null).exports},5005:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form-group",{staticClass:"m-3",attrs:{description:"Estafette uses a lot of sane defaults to keep your manifest small and readable."}},[r("b-form-checkbox",{model:{value:e.showDefaults,callback:function(t){e.showDefaults=t},expression:"showDefaults"}},[e._v("\n      Show defaults\n    ")])],1),e._v(" "),e.showDefaults?r("pre",{staticClass:"bg-light m-3 p-3"},[e._v(e._s(e.build.manifestWithDefaults))]):r("pre",{staticClass:"bg-light m-3 p-3"},[e._v(e._s(e.build.manifest))])],1)};i._withStripped=!0;var s=r(4951),n=r(4058),a={components:{BFormCheckbox:s.l,BFormGroup:n.x},props:{build:{type:Object,default:null}},data:function(){return{showDefaults:!1}}},o=(0,r(1900).Z)(a,i,[],!1,null,null,null).exports},7912:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-3"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-lg-3"},[r("build-branch-filter",{attrs:{filter:e.filter,model:e.filter.branch,"on-change":e.setBranch,pipeline:e.pipeline}})],1),e._v(" "),r("div",{staticClass:"col-7 col-lg-6 text-lg-center"},[r("status-filter",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"col-5 col-lg-3"},[r("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),r("div",{staticClass:"row-header"},[r("div",{staticClass:"col-2"},[e._v("\n      Version\n    ")]),e._v(" "),r("div",{staticClass:"col-1"},[e._v("\n      Status\n    ")]),e._v(" "),r("div",{staticClass:"col-2"},[e._v("\n      Built at\n    ")]),e._v(" "),r("div",{staticClass:"col-1"},[e._v("\n      Branch\n    ")]),e._v(" "),r("div",{staticClass:"col-1"},[e._v("\n      Revision\n    ")]),e._v(" "),r("div",{staticClass:"col-3"},[e._v("\n      Commit(s)\n    ")]),e._v(" "),e.user&&e.user.active?r("div",{staticClass:"col-2"},[e._v("\n      Actions\n    ")]):e._e()]),e._v(" "),e.builds.length>0?r("transition-group",{attrs:{name:"list-complete",tag:"div"}},e._l(e.builds,(function(t){return r("build-row",{key:t.id,attrs:{build:t,builds:e.builds,pipeline:e.pipeline}})})),1):e.loaded?r("div",{staticClass:"alert alert-warning text-center p-5"},[e._v("\n    There are no builds for the current filters. Please change your filters!\n  ")]):r("div",[r("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.builds.length>0?r("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(2061),a=r(1820),o=r(5106),l=r(7369),c=r(2326),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-input-group",{staticClass:"mb-3"},[r("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter builds on their branch"}},[r("font-awesome-icon",{attrs:{icon:"code-branch"}})],1),e._v(" "),r("b-form-select",{attrs:{options:e.buildBranchOptions},on:{change:e.onChange},model:{value:e.mutableModel,callback:function(t){e.mutableModel=t},expression:"mutableModel"}})],1)};u._withStripped=!0;var p=r(5343),d=r(6127),h=r(7754),f=r(8947),m=r(1436),b=r(7810);f.vI.add(m.mh3);var g={components:{BFormSelect:p.K,BInputGroup:d.w,BInputGroupPrepend:h.P,FontAwesomeIcon:b.GN},props:{pipeline:{type:Object,default:null},filter:{type:Object,default:null},model:{type:String,default:null},onChange:{type:Function,default:null}},data:function(){return{branches:[],pagination:{page:1,size:15},refresh:!0,mutableModel:this.model}},created:function(){this.loadBuildBranches()},methods:{loadBuildBranches:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling"),this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/buildbranches?").concat(t,"&filter[since]=1m&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.branches=t.data.items,e.periodicallyRefreshBuildBranches(5)})).catch((function(t){e.periodicallyRefreshBuildBranches(30)}))},periodicallyRefreshBuildBranches:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBuildBranches,i))}},watch:{filter:{handler:function(e,t){this.loadBuildBranches()},deep:!0}},computed:{buildBranchOptions:function(){var e=[{value:"",text:"All branches"}];return this.branches&&this.branches.forEach((function(t){e.push({value:t.name,text:"".concat(t.name," (").concat(t.count,")")})})),e}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},v=r(1900),y=(0,v.Z)(g,u,[],!1,null,null,null).exports;function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={components:{Spinner:n.Z,StatusFilter:a.Z,PaginationCompact:o.Z,BuildRow:l.Z,Pagination:c.Z,BuildBranchFilter:y},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},query:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{builds:[],pagination:{page:1,size:10,totalPages:0,totalItems:0},filter:{status:"all",branch:""},loaded:!1,refresh:!0}},created:function(){this.filterDefaults=w({},this.filter),this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadBuilds()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=w({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.filter&&this.filter.branch&&""!==this.filter.branch?e.branch=this.filter.branch:e.branch&&delete e.branch,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadBuilds:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling");var r="filter[branch]=".concat(this.filter.branch);this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/builds?").concat(t,"&").concat(r,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.builds=t.data.items,e.pagination=t.data.pagination,e.loaded=!0})).catch((function(t){e.periodicallyRefreshBuilds(15)}))},periodicallyRefreshBuilds:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadBuilds,i))},setBranch:function(e){this.filter.branch=e,this.updateQueryParams()}},computed:w({},(0,s.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadBuilds()},pipeline:{handler:function(e,t){this.loadBuilds()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},x=(0,v.Z)(O,i,[],!1,null,null,null).exports},3461:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section-header",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),r("migration-notice",{attrs:{"repo-source":e.repoSource,"repo-owner":e.repoOwner,"repo-name":e.repoName,page:e.currentRoute}}),e._v(" "),r("b-breadcrumb",{staticClass:"m-3 rounded",attrs:{items:e.breadcrumbs}}),e._v(" "),e.pipeline?r("pipeline-header",{attrs:{pipeline:e.pipeline}}):e._e(),e._v(" "),r("inner-navigation-tabs",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),e.pipeline?r("router-view",{staticClass:"m-3",attrs:{pipeline:e.pipeline}}):e._e(),e._v(" "),e.notFound?r("div",{staticClass:"row"},[e._m(0)]):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(6578),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header-block"},[r("property-block",{attrs:{label:"Pipeline",variant:"success",title:""}},[r("repository-title",{attrs:{repo:e.pipeline}})],1),e._v(" "),e.showLabels?r("property-block",{attrs:{label:"Labels",wide:""}},[r("labels",{attrs:{labels:e.pipeline.labels}})],1):e._e(),e._v(" "),e.showReleases?r("property-block",{attrs:{label:"Releases",wide:""}},e._l(e.pipeline.releaseTargets,(function(t){return r("release-badge",{key:t.name,attrs:{"release-target":t,pipeline:e.pipeline}})})),1):e._e(),e._v(" "),e.pipeline.groups&&e.pipeline.groups.length>0?r("property-block",{attrs:{label:"Group(s)",wide:""}},e._l(e.pipeline.groups,(function(e){return r("group-badge",{key:e.id,attrs:{group:e}})})),1):e._e()],1)};a._withStripped=!0;var o=r(6318),l=r(3851),c=r(1033),u=r(8402),p=r(2464),d={components:{ReleaseBadge:o.Z,GroupBadge:l.Z,PropertyBlock:c.Z,RepositoryTitle:u.Z,Labels:p.Z},props:{pipeline:{type:Object,default:null},filter:{type:Object,default:null}},computed:{showReleases:function(){return this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0},showLabels:function(){return this.pipeline.labels&&this.pipeline.labels.length>0},showTriggers:function(){return this.pipeline.triggerEvents&&this.pipeline.triggerEvents.length>0}}},h=r(1900),f=(0,h.Z)(d,a,[],!1,null,null,null).exports,m=r(1387),b=r(9367),g=r(4740);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={components:{BBreadcrumb:n.P,SectionHeader:b.Z,PipelineHeader:f,MigrationNotice:m.Z,InnerNavigationTabs:g.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null}},data:function(){return{pipeline:null,refresh:!0,migration:null,notFound:!1,currentRoute:this.$route.path.split("/").slice(-1)[0],breadcrumbs:[{text:"Builds & releases",to:{name:"Pipelines"}},{text:"".concat(this.repoName),to:{name:"PipelineOverview",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}},active:!0}]}},created:function(){this.loadPipeline()},methods:{loadPipeline:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName)).then((function(t){e.pipeline=t.data,e.periodicallyRefreshPipeline(5)})).catch((function(t){if("NotFound"===t.message)return e.refresh=!1,void(e.notFound=!0);e.periodicallyRefreshPipeline(18e3)}))},periodicallyRefreshPipeline:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadPipeline,i))},sortLabels:function(e){return e?e.slice().sort((function(e,t){return e.key>t.key})):e}},watch:{$route:function(e,t){this.currentRoute=e.path.split("/").slice(-1)[0]}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,s.rn)("user",{user:"me"})),beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},w=_,S=(0,h.Z)(w,i,[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-12 text-center"},[r("h3",{staticClass:"text-muted"},[e._v("\n        Pipeline not found\n      ")])])}],!1,null,null,null).exports},218:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-3"},[r("div",{staticClass:"row mt-0 mr-0 ml-0"},[r("div",{staticClass:"col-12 col-sm-8 col-lg"}),e._v(" "),r("div",{staticClass:"col-12 col-sm-4 col-lg-2 p-0 text-right"},[r("b-input-group",{staticClass:"mb-3"},[r("b-input-group-prepend",{attrs:{"is-text":""}},[r("font-awesome-icon",{attrs:{icon:"history"}})],1),e._v(" "),r("b-form-select",{attrs:{options:e.lastOptions},on:{change:e.setLast},model:{value:e.filter.last,callback:function(t){e.$set(e.filter,"last",t)},expression:"filter.last"}})],1)],1)]),e._v(" "),r("div",{staticClass:"mt-0 mr-3 mb-3 ml-3 row"},[r("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[r("pipeline-stats-timeline",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"builds",status:"primary"}})],1),e._v(" "),r("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[r("pipeline-stats-cpu",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"builds",status:"primary"}})],1),e._v(" "),r("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[r("pipeline-stats-memory",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"builds",status:"primary"}})],1),e._v(" "),e.hasReleases?r("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[r("pipeline-stats-timeline",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"releases",status:"success"}})],1):e._e(),e._v(" "),e.hasReleases?r("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[r("pipeline-stats-cpu",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"releases",status:"success"}})],1):e._e(),e._v(" "),e.hasReleases?r("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[r("pipeline-stats-memory",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"releases",status:"success"}})],1):e._e(),e._v(" "),e.hasBots?r("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[r("pipeline-stats-timeline",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"bots",status:"warning"}})],1):e._e(),e._v(" "),e.hasBots?r("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[r("pipeline-stats-cpu",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"bots",status:"warning"}})],1):e._e(),e._v(" "),e.hasBots?r("div",{staticClass:"col-12 col-xl-6 col-xxxl-4"},[r("pipeline-stats-memory",{staticClass:"mb-3",attrs:{pipeline:e.pipeline,filter:e.filter,type:"bots",status:"warning"}})],1):e._e()])])};i._withStripped=!0;var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-0 graph bg-white"},[r("div",{staticClass:"rounded border"},[0==e.series.length?r("spinner",{attrs:{color:e.status}}):e._e(),e._v(" "),r("apexcharts",{attrs:{width:"100%",type:e.options.type,options:e.options,series:e.series}})],1)])};s._withStripped=!0;var n=r(2061),a=r(1700),o=r.n(a),l={components:{Spinner:n.Z,apexcharts:function(){return r.e(909).then(r.t.bind(r,7166,23))}},props:{type:{type:String,default:null},status:{type:String,default:null},pipeline:{type:Object,default:null},filter:{type:Object,default:null}},data:function(){var e=this;return{options:{chart:{id:"".concat(this.type,"-duration-timeline"),animations:{enabled:!0,easing:"easeinout",dynamicAnimation:{enabled:!0,speed:500}},toolbar:{show:!1}},markers:{size:0,hover:{size:6}},title:{text:o()(this.type)+" duration",align:"center",style:{fontSize:"24px",color:this.getColor(this.status)}},legend:{showForSingleSeries:"builds"!==this.type},type:"line",stroke:{curve:"smooth"},xaxis:{type:"datetime"},yaxis:{min:0,title:{text:"duration"},labels:{formatter:function(t){return void 0!==t?e.$options.filters.formatDuration(t):t}}},colors:this.getColors(this.status),grid:{show:!0,yaxis:{lines:{show:!1,animate:!1}}},tooltip:{shared:!0,intersect:!1,y:{formatter:function(t){return void 0!==t?e.$options.filters.formatDuration(t):t}}}},series:[],refresh:!0}},created:function(){this.loadStat()},methods:{getColor:function(e){switch(e){case"primary":return"#007bff";case"success":return"#28a745";case"warning":return"#ffc107"}return"#212529"},getColors:function(e){var t=["#007bff","#28a745","#dc3545","#ffc107","#17a2b8"],r=this.getColor(this.status),i=[r];for(var s in t){var n=t[s];n!==r&&i.push(n)}return i},loadStat:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/stats/").concat(this.type,"durations?filter[last]=").concat(this.filter.last)).then((function(t){e.updateSeries(t.data.durations),e.periodicallyRefreshStat(60)})).catch((function(t){e.periodicallyRefreshStat(120)}))},periodicallyRefreshStat:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadStat,i))},updateSeries:function(e){var t=this,r={};e.forEach((function(e){var t="duration";e.name&&(t=e.name,e.action&&""!==e.action&&(t+=" / "+e.action)),r[t]||(r[t]=[]),r[t].push({x:e.insertedAt,y:e.duration})}));var i=function(e){var i=t.series.find((function(t){return t.name===e}));i||(i={name:e,data:[]},t.series.push(i)),i.data=t.filterOutliers(r[e])};for(var s in r)i(s)},filterOutliers:function(e){if(e.length<10)return e.sort((function(e,t){return new Date(e.x)-new Date(t.x)}));var t,r,i=e.slice().sort((function(e,t){return e.y-t.y}));i.length/4%1==0?(t=.5*(i[i.length/4].y+i[i.length/4+1].y),r=.5*(i[i.length*(3/4)].y+i[i.length*(3/4)+1].y)):(t=i[Math.floor(i.length/4+1)].y,r=i[Math.ceil(i.length*(3/4)+1)].y);var s=r-t,n=r+1.5*s,a=t-1.5*s;return(a>=n?i.filter((function(e){return e.y>=n&&e.y<=a})):i.filter((function(e){return e.y>=a&&e.y<=n}))).sort((function(e,t){return new Date(e.x)-new Date(t.x)}))}},watch:{filter:{handler:function(e,t){this.loadStat()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},c=r(1900),u=(0,c.Z)(l,s,[],!1,null,null,null).exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-0 graph bg-white"},[r("div",{staticClass:"rounded border"},[0==e.series.length?r("spinner",{attrs:{color:e.status}}):e._e(),e._v(" "),r("apexcharts",{attrs:{width:"100%",type:e.options.type,options:e.options,series:e.series}})],1)])};p._withStripped=!0;var d={components:{Spinner:n.Z,apexcharts:function(){return r.e(909).then(r.t.bind(r,7166,23))}},props:{type:{type:String,default:null},status:{type:String,default:null},pipeline:{type:Object,default:null},filter:{type:Object,default:null}},data:function(){var e=this;return{options:{chart:{id:"".concat(this.type,"-cpu-timeline"),animations:{enabled:!0,easing:"easeinout",dynamicAnimation:{enabled:!0,speed:500}},toolbar:{show:!1}},markers:{size:0,hover:{size:6}},title:{text:o()(this.type)+" max CPU",align:"center",style:{fontSize:"24px",color:this.getColor(this.status)}},legend:{showForSingleSeries:"builds"!==this.type},type:"line",stroke:{curve:"smooth"},xaxis:{type:"datetime"},yaxis:{min:0,title:{text:"cpu cores"},labels:{formatter:function(t){return void 0!==t?e.$options.filters.formatNumber(t):t}}},colors:this.getColors(this.status),grid:{show:!0,yaxis:{lines:{show:!1,animate:!1}}},tooltip:{shared:!0,intersect:!1,y:{formatter:function(t){return void 0!==t?e.$options.filters.formatNumber(t):t}}}},series:[],refresh:!0}},created:function(){this.loadStat()},methods:{getColor:function(e){switch(e){case"primary":return"#007bff";case"success":return"#28a745";case"warning":return"#ffc107"}return"#212529"},getColors:function(e){var t=["#007bff","#28a745","#dc3545","#ffc107","#17a2b8"],r=this.getColor(this.status),i=[r];for(var s in t){var n=t[s];n!==r&&i.push(n)}return i},loadStat:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/stats/").concat(this.type,"cpu?filter[last]=").concat(this.filter.last)).then((function(t){e.updateSeries(t.data.measurements),e.periodicallyRefreshStat(60)})).catch((function(t){e.periodicallyRefreshStat(120)}))},periodicallyRefreshStat:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadStat,i))},updateSeries:function(e){var t=this,r={};e.forEach((function(e){var t="cpu";e.name&&(t=e.name,e.action&&""!==e.action&&(t+=" / "+e.action)),r[t]||(r[t]=[]),r[t].push({x:e.insertedAt,y:e.cpuMaxUsage})}));var i=function(e){var i=t.series.find((function(t){return t.name===e}));i||(i={name:e,data:[]},t.series.push(i)),i.data=r[e]};for(var s in r)i(s)}},watch:{filter:{handler:function(e,t){this.loadStat()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},h=(0,c.Z)(d,p,[],!1,null,null,null).exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-0 graph bg-white"},[r("div",{staticClass:"rounded border"},[0==e.series.length?r("spinner",{attrs:{color:e.status}}):e._e(),e._v(" "),r("apexcharts",{attrs:{width:"100%",type:e.options.type,options:e.options,series:e.series}})],1)])};f._withStripped=!0;var m={components:{Spinner:n.Z,apexcharts:function(){return r.e(909).then(r.t.bind(r,7166,23))}},props:{type:{type:String,default:null},status:{type:String,default:null},pipeline:{type:Object,default:null},filter:{type:Object,default:null}},data:function(){var e=this;return{options:{chart:{id:"".concat(this.type,"-memory-timeline"),animations:{enabled:!0,easing:"easeinout",dynamicAnimation:{enabled:!0,speed:500}},toolbar:{show:!1}},markers:{size:0,hover:{size:6}},title:{text:o()(this.type)+" max memory",align:"center",style:{fontSize:"24px",color:this.getColor(this.status)}},legend:{showForSingleSeries:"builds"!==this.type},type:"line",stroke:{curve:"smooth"},xaxis:{type:"datetime"},yaxis:{min:0,title:{text:"duration"},labels:{formatter:function(t){return void 0!==t?e.$options.filters.formatBytes(t):t}}},colors:this.getColors(this.status),grid:{show:!0,yaxis:{lines:{show:!1,animate:!1}}},tooltip:{shared:!0,intersect:!1,y:{formatter:function(t){return void 0!==t?e.$options.filters.formatBytes(t):t}}}},series:[],refresh:!0}},created:function(){this.loadStat()},methods:{getColor:function(e){switch(e){case"primary":return"#007bff";case"success":return"#28a745";case"warning":return"#ffc107"}return"#212529"},getColors:function(e){var t=["#007bff","#28a745","#dc3545","#ffc107","#17a2b8"],r=this.getColor(this.status),i=[r];for(var s in t){var n=t[s];n!==r&&i.push(n)}return i},loadStat:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/stats/").concat(this.type,"memory?filter[last]=").concat(this.filter.last)).then((function(t){e.updateSeries(t.data.measurements),e.periodicallyRefreshStat(60)})).catch((function(t){e.periodicallyRefreshStat(120)}))},periodicallyRefreshStat:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadStat,i))},updateSeries:function(e){var t=this,r={};e.forEach((function(e){var t="memory";e.name&&(t=e.name,e.action&&""!==e.action&&(t+=" / "+e.action)),r[t]||(r[t]=[]),r[t].push({x:e.insertedAt,y:e.memoryMaxUsage})}));var i=function(e){var i=t.series.find((function(t){return t.name===e}));i||(i={name:e,data:[]},t.series.push(i)),i.data=r[e]};for(var s in r)i(s)}},watch:{filter:{handler:function(e,t){this.loadStat()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},b=(0,c.Z)(m,f,[],!1,null,null,null).exports,g=r(5343),v=r(6127),y=r(7754),_=r(8947),w=r(1436),S=r(7810);_.vI.add(w.Stf,w.qO$);var O={components:{PipelineStatsTimeline:u,PipelineStatsCpu:h,PipelineStatsMemory:b,BFormSelect:g.K,BInputGroup:v.w,BInputGroupPrepend:y.P,FontAwesomeIcon:S.GN},props:{query:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{filter:{last:"100"},lastOptions:[{value:"25",text:"Last 25 builds/releases/bots"},{value:"100",text:"Last 100 builds/releases/bots"},{value:"250",text:"Last 250 builds/releases/bots"},{value:"1000",text:"Last 1000 builds/releases/bots"},{value:"100000",text:"All builds/releases/bots"}]}},created:function(){this.setDataFromQueryParams(this.query)},methods:{setDataFromQueryParams:function(e){this.filter.last=e&&e.last?e.last:"100"},updateQueryParams:function(){this.$router.push({query:{last:this.filter.last}})},setLast:function(e){this.filter.last=e,this.updateQueryParams()}},computed:{hasReleases:function(){return this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0},hasBots:function(){return this.pipeline&&this.pipeline.triggers&&this.pipeline.triggers.some((function(e){return e.runs}))}}},x=(0,c.Z)(O,i,[],!1,null,null,null).exports},8639:function(e,t,r){r.r(t),r.d(t,{default:function(){return R}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[e.pipeline?r("pipeline-warnings",{attrs:{pipeline:e.pipeline}}):e._e(),e._v(" "),r("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 justify-content-center"},[r("div",{staticClass:"h5 text-center mt-3 mb-3 text-secondary"},[r("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"tools"}}),e._v("\n      Recent builds\n    ")],1)]),e._v(" "),e.builds.length>0?r("transition-group",{staticClass:"row justify-content-center m-0 mt-3 mb-3 ml-3",attrs:{name:"list-complete",tag:"div"}},e._l(e.builds,(function(t){return r("drag",{key:t.id,staticClass:"col-12 col-md-6 col-xl-4 col-xxl-3 col-xxxl-2 m-0 p-0 pr-3 pb-3 list-complete-item",attrs:{disabled:!e.user||!e.user.active||"succeeded"!==t.buildStatus,data:t}},[r("div",{class:["bg-light","rounded border align-items-center pt-3 pr-2 pb-2 pl-2 text-center bg-white"]},[r("div",{staticClass:"row mb-2"},[r("div",{staticClass:"col-6 text-truncate"},[e._v("\n            "+e._s(t.repoBranch)+"\n          ")]),e._v(" "),r("div",{staticClass:"col-6"},[r("commit-link",{attrs:{build:t}})],1)]),e._v(" "),r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col text-truncate"},[r("b-button",{staticClass:"mr-1 mb-1 text-truncate",attrs:{to:{name:"PipelineBuildLogs",params:{repoSource:e.pipeline.repoSource,repoOwner:e.pipeline.repoOwner,repoName:e.pipeline.repoName,id:t.id}},exact:"",variant:e.$options.filters.bootstrapVariant(t.buildStatus),size:"sm",block:""}},[t.buildVersion?r("span",[e._v("\n                "+e._s(t.buildVersion)+"\n              ")]):r("span",[e._v("\n                -\n              ")])])],1),e._v(" "),e.showActions(t)?r("div",{staticClass:"col-auto"},[r("rebuild-button-compact",{staticClass:"mr-1 mb-1 ml-1",attrs:{build:t,builds:e.builds}}),e._v(" "),r("cancel-button-compact",{staticClass:"mr-1 mb-1 ml-1",attrs:{build:t}})],1):e._e()]),e._v(" "),r("div",{staticClass:"row mt-2"},[t.commits&&t.commits.length>0?r("div",{staticClass:"col-12 text-muted text-truncate"},[e._v("\n            "+e._s(t.commits[0].message)+"\n          ")]):e._e()])])])})),1):e.loaded?r("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 alert alert-warning text-center p-5"},[e._v("\n    There are no recent builds for the current pipeline.\n  ")]):r("div",{staticClass:"row m-0 mt-3 mb-3 ml-3"},[r("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.pipeline.releaseTargets&&e.pipeline.releaseTargets.length>0?r("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 justify-content-center"},[r("div",{staticClass:"h5 text-center mt-3 mb-3 text-secondary"},[r("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"upload"}}),e._v("\n      Releases\n      "),r("div",{staticClass:"small text-muted mt-2"},[e._v("\n        (drag and drop a build on a release)\n      ")])],1)]):e._e(),e._v(" "),r("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 justify-content-center"},e._l(e.pipeline.releaseTargets,(function(t){return r("div",{key:t.name,staticClass:"col-12 col-md-6 col-xl-4 col-xxl-3 col-xxxl-2 m-0 p-0 pr-3 pb-3"},[r("div",{class:["bg-light","rounded border align-items-center pt-3 pr-2 pb-2 pl-2 text-center bg-white"]},[r("h6",{staticClass:"text-truncate"},[e._v("\n          "+e._s(t.name)+"\n        ")]),e._v(" "),e._l(e.mergedActionsAndActiveReleases(t),(function(i,s){return r("drop",{key:s,on:{drop:function(r){return e.releaseBuildToTargetAction(r,t,i)}}},[i&&i.id?r("b-button",{staticClass:"mr-1 mb-1 text-truncate",attrs:{to:{name:"PipelineReleaseLogs",params:{repoSource:e.pipeline.repoSource,repoOwner:e.pipeline.repoOwner,repoName:e.pipeline.repoName,releaseID:i.id}},exact:"",variant:e.$options.filters.bootstrapVariant(i.releaseStatus),size:"sm",block:""}},[i.action?r("span",[e._v("\n              "+e._s(i.action)+":\n            ")]):e._e(),e._v(e._s(e._f("defaultValue")(i.releaseVersion,"-"))+"\n\n            "),e.releaseIsUpToDate(i)?r("font-awesome-icon",{attrs:{icon:"fire"}}):e._e()],1):i?r("button",{class:["btn btn-sm btn-block mr-1 mb-1 text-truncate",e.$options.filters.bootstrapClass(i.releaseStatus,"btn")]},[i.action?r("span",[e._v("\n              "+e._s(i.action)+":\n            ")]):e._e(),e._v(e._s(e._f("defaultValue")(i.releaseVersion,"-"))+"\n          ")]):e._e()],1)}))],2)])})),0)],1)};i._withStripped=!0;var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.warnings&&e.warnings.length>0?r("div",{staticClass:"col m-0 mt-3"},[r("div",{staticClass:"row m-0 mt-3 mb-3 ml-3 justify-content-center"},[r("div",{staticClass:"h5 text-center mt-3 mb-3 text-secondary"},[r("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"exclamation-triangle"}}),e._v("\n      Warnings\n    ")],1)]),e._v(" "),e._l(e.warnings,(function(e,t){return r("warning",{key:t,attrs:{warning:e}})}))],2):e._e()};s._withStripped=!0;var n=r(1514),a=r(8947),o=r(1436),l=r(7810);a.vI.add(o.eHv);var c={components:{Warning:n.Z,FontAwesomeIcon:l.GN},props:{pipeline:{type:Object,default:null}},data:function(){return{warnings:[],refresh:!0}},created:function(){this.loadPipelineWarnings()},methods:{loadPipelineWarnings:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.pipeline.repoSource,"/").concat(this.pipeline.repoOwner,"/").concat(this.pipeline.repoName,"/warnings")).then((function(t){e.warnings=t.data.warnings})).catch((function(t){e.periodicallyRefresh(30)}))},periodicallyRefresh:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadPipelineWarnings,i))}},watch:{pipeline:{handler:function(e,t){this.loadPipelineWarnings()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},u=r(1900),p=(0,u.Z)(c,s,[],!1,null,null,null).exports,d=r(629),h=r(5193),f=r(2061),m=r(7636),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.allowedToRebuild()?r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"warning",size:"sm",title:"Rebuild this failed build"},on:{click:function(t){return t.stopPropagation(),e.rebuild(t)}}},[r("font-awesome-icon",{attrs:{icon:"redo"}})],1):e._e()};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}b._withStripped=!0,a.vI.add(o.XSV);var y={components:{BButton:h.T,FontAwesomeIcon:l.GN},props:{build:{type:Object,default:null},builds:{type:Array,default:null},compact:{type:Boolean,default:!1}},data:function(){return{clicked:!1}},methods:{allowedToRebuild:function(){var e=this;return!(!this.user.active||!this.build||"failed"!==this.build.buildStatus&&"canceled"!==this.build.buildStatus)&&(!(this.builds&&this.builds.length>0)||!this.builds.some((function(t){return t.buildVersion===e.build.buildVersion&&"succeeded"===t.buildStatus})))},rebuild:function(e){var t=this;this.user.active&&this.axios.post("/api/pipelines/".concat(this.build.repoSource,"/").concat(this.build.repoOwner,"/").concat(this.build.repoName,"/builds"),this.build).then((function(e){t.builds.unshift(e.data),t.builds.shift()})).catch((function(e){console.warn(e)}))}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,d.rn)("user",{user:"me"}))},_=y,w=(0,u.Z)(_,b,[],!1,null,null,null).exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user.active&&(e.build&&("pending"===e.build.buildStatus||"running"===e.build.buildStatus||"canceling"===e.build.buildStatus)||e.release&&("pending"===e.release.releaseStatus||"running"===e.release.releaseStatus||"canceling"===e.release.releaseStatus))?r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"danger",size:"sm",title:"Cancel this build"},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[r("font-awesome-icon",{attrs:{icon:"ban"}})],1):e._e()};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}S._withStripped=!0,a.vI.add(o.gPx);var C={components:{BButton:h.T,FontAwesomeIcon:l.GN},props:{build:{type:Object,default:null},release:{type:Object,default:null},compact:{type:Boolean,default:!1}},data:function(){return{clicked:!1}},methods:{cancel:function(e){var t=this;this.user.active&&(!this.build||"pending"!==this.build.buildStatus&&"running"!==this.build.buildStatus&&"canceling"!==this.build.buildStatus?!this.release||"pending"!==this.release.releaseStatus&&"running"!==this.release.releaseStatus&&"canceling"!==this.release.releaseStatus||this.axios.delete("/api/pipelines/".concat(this.release.repoSource,"/").concat(this.release.repoOwner,"/").concat(this.release.repoName,"/releases/").concat(this.release.id)).then((function(e){t.release.releaseStatus="canceling"})).catch((function(e){console.warn(e)})):this.axios.delete("/api/pipelines/".concat(this.build.repoSource,"/").concat(this.build.repoOwner,"/").concat(this.build.repoName,"/builds/").concat(this.build.id)).then((function(e){t.build.buildStatus="canceling"})).catch((function(e){console.warn(e)})))}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,d.rn)("user",{user:"me"}))},P=C,T=(0,u.Z)(P,S,[],!1,null,null,null).exports,j=r(6030);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}a.vI.add(o.Rpv,o.CgH,o.cf$);var N={components:{PipelineWarnings:p,BButton:h.T,Spinner:f.Z,CommitLink:m.Z,RebuildButtonCompact:w,CancelButtonCompact:T,Drag:j.nc,Drop:j.Ud,FontAwesomeIcon:l.GN},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},pipeline:{type:Object,default:null}},data:function(){return{builds:[],loaded:!1,refresh:!0,migration:!1}},created:function(){this.loadRecentBuilds()},methods:{releaseBuildToTargetAction:function(e,t,r){if(!this.releaseTargetDisabled(t)){var i="";r.action&&(i=r.action);var s=e.data;this.startRelease(s,t,i)}},startRelease:function(e,t,r){var i=this;if(this.user.active){var s={name:t.name,action:r,repoSource:e.repoSource,repoOwner:e.repoOwner,repoName:e.repoName,releaseVersion:e.buildVersion,releaseStatus:"pending"};this.updateRelease(s),this.axios.post("/api/pipelines/".concat(e.repoSource,"/").concat(e.repoOwner,"/").concat(e.repoName,"/releases"),s).then((function(e){s=e.data,i.updateRelease(s)})).catch((function(e){console.warn(e)}))}},updateRelease:function(e){var t=this.pipeline.releaseTargets.find((function(t){return t.name===e.name}));if(t)if(t.activeReleases){var r=!1,i=t.activeReleases.map((function(t){return t.action?e.action&&t.action===e.action?(r=!0,e):t:(r=!0,e)}));r||i.push(e),t.activeReleases=i}else t.activeReleases=[e]},releaseIsUpToDate:function(e){return this.pipeline&&this.pipeline.buildStatus&&"succeeded"===this.pipeline.buildStatus&&this.pipeline.buildVersion&&e&&e.releaseStatus&&"succeeded"===e.releaseStatus&&this.pipeline.buildVersion===e.releaseVersion},loadRecentBuilds:function(){var e=this;this.axios.get("/api/migrations/from/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName)).then((function(t){t.data&&t.data.toName&&(e.migration=t.data)})).catch((function(e){console.warn("pipeline not found and not migrated",e)})),this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/builds?page[size]=6")).then((function(t){e.builds=t.data.items,e.loaded=!0})).catch((function(t){"Not Found"!==t.message?e.periodicallyRefreshRecentBuilds(18e3):e.refresh=!1}))},periodicallyRefreshRecentBuilds:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadRecentBuilds,i))},getActiveRelease:function(e,t){if(e)return e.find((function(e){return e.action===t}))},releaseTargetDisabled:function(e){return this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.length>0&&this.pipeline.releaseTargets.some((function(t){return t.name===e.name&&t.activeReleases&&t.activeReleases.some((function(e){return e&&"running"===e.releaseStatus}))}))},showActions:function(e){return this.user&&this.user.active&&e&&("failed"===e.buildStatus||"pending"===e.buildStatus||"running"===e.buildStatus||"canceled"===e.buildStatus||"canceling"===e.buildStatus)}},computed:k(k({},(0,d.rn)("user",{user:"me"})),{},{mergedActionsAndActiveReleases:function(){var e=this;return function(t){if(!(t.actions&&0!==t.actions.length||t.activeReleases&&0!==t.activeReleases.length))return[{name:t.name,repoSource:e.pipeline.repoSource,repoOwner:e.pipeline.repoOwner,repoName:e.pipeline.repoName}];if(!t.actions||0===t.actions.length)return t.activeReleases;var r=[];return t.actions.forEach((function(i){var s=e.getActiveRelease(t.activeReleases,i.name);void 0!==s?r.push(s):r.push({name:t.name,action:i.name,repoSource:e.pipeline.repoSource,repoOwner:e.pipeline.repoOwner,repoName:e.pipeline.repoName})})),r}}}),watch:{$route:function(e,t){this.loadRecentBuilds()},pipeline:{handler:function(e,t){this.loadRecentBuilds()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},R=(0,u.Z)(N,i,[],!1,null,null,null).exports},1954:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section-header",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),r("migration-notice",{attrs:{"repo-source":e.repoSource,"repo-owner":e.repoOwner,"repo-name":e.repoName,id:e.releaseID,page:"releases"}}),e._v(" "),r("b-breadcrumb",{staticClass:"m-3 rounded",attrs:{items:e.breadcrumbs}}),e._v(" "),e.release?r("release-header",{attrs:{release:e.release,pipeline:!e.pipeline||"pending"!==e.release.releaseStatus&&"running"!==e.release.releaseStatus?e.release:e.pipeline}}):e._e(),e._v(" "),r("inner-navigation-tabs",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),e.release?r("router-view",{staticClass:"m-3",attrs:{release:e.release}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(6578),a=r(9367),o=r(1387),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header-block"},[r("property-block",{attrs:{label:"Release",variant:"success",title:""}},[r("repository-title",{attrs:{repo:e.release}})],1),e._v(" "),r("property-block",{attrs:{label:e.release.action?"Target + action":"Target",value:e.release.action?e.release.name+" / "+e.release.action:e.release.name}},[e._v("\n    "+e._s(e.release.name)),e.release.action?r("span",[e._v("\n      / "+e._s(e.release.action)+"\n    ")]):e._e()]),e._v(" "),r("property-block",{attrs:{label:"Version",value:e.release.releaseVersion}}),e._v(" "),r("property-block",{attrs:{label:"Status"}},[r("b-progress",[r("b-progress-bar",{attrs:{value:e.$options.filters.releaseProgressBarValue(e.pipeline,e.release,e.now),label:e.$options.filters.releaseProgressBarLabel(e.pipeline,e.release,e.now),variant:e.$options.filters.bootstrapVariant(e.release.releaseStatus),animated:e.$options.filters.animatedProgressBar(e.release.releaseStatus)}})],1)],1),e._v(" "),r("property-block",{attrs:{label:"Released at"}},[e._v("\n    "+e._s(e._f("formatDatetime")(e.release.insertedAt))+"\n    "),r("duration-label",{attrs:{duration:e.release.duration,"pending-duration":e.release.pendingDuration}})],1),e._v(" "),r("property-block",{attrs:{label:"Triggered by"}},[r("triggered-by",{attrs:{events:e.release.triggerEvents}})],1),e._v(" "),e.showActions?r("property-block",{attrs:{label:"Actions"}},[r("cancel-button",{attrs:{release:e.release}})],1):e._e()],1)};l._withStripped=!0;var c=r(5752),u=r(2981),p=r(2874),d=r(2725),h=r(1033),f=r(8402),m=r(5689),b=r(6546);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={components:{BProgress:c.D,BProgressBar:u.Q,CancelButton:p.Z,TriggeredBy:d.Z,PropertyBlock:h.Z,RepositoryTitle:f.Z,DurationLabel:m.Z},props:{release:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{now:Date.now()}},created:function(){this.updateNow()},methods:{updateNow:function(){this.now=Date.now(),!this.release||"pending"!==this.release.releaseStatus&&"running"!==this.release.releaseStatus||b.Z.timeout(this.timeout,this.updateNow,1)}},beforeDestroy:function(){clearTimeout(this.timeout)},computed:v(v({},(0,s.rn)("user",{user:"me"})),{},{showActions:function(){return this.user&&this.user.active&&this.release&&("pending"===this.release.releaseStatus||"running"===this.release.releaseStatus||"canceling"===this.release.releaseStatus)}})},w=r(1900),S=(0,w.Z)(_,l,[],!1,null,null,null).exports,O=r(4740);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P={components:{BBreadcrumb:n.P,SectionHeader:a.Z,ReleaseHeader:S,MigrationNotice:o.Z,InnerNavigationTabs:O.Z},props:{repoSource:{type:String,required:!0,default:null},repoOwner:{type:String,required:!0,default:null},repoName:{type:String,required:!0,default:null},releaseID:{type:String,required:!0,default:null}},data:function(){return{release:null,pipeline:null,refresh:!0,migration:null,breadcrumbs:[{text:"Builds & releases",to:{name:"Pipelines"}},{text:"".concat(this.repoName),to:{name:"PipelineOverview",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"releases",to:{name:"PipelineReleases",params:{repoSource:this.repoSource,repoOwner:this.repoOwner,repoName:this.repoName}}},{text:"..."}]}},created:function(){this.loadRelease()},methods:{loadRelease:function(){var e=this;this.axios.get("/api/migrations/releases/".concat(this.releaseID)).then((function(t){t.data&&(e.migration=t.data)})).catch((function(e){console.debug("release probably not migrated",e)})),this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/releases/").concat(this.releaseID)).then((function(t){e.release=t.data,"pending"!==e.release.releaseStatus&&"running"!==e.release.releaseStatus||e.loadPipeline(),e.breadcrumbs[e.breadcrumbs.length-1]={text:"".concat(e.release.releaseVersion," to ").concat(e.release.name)+(e.release.action?" (".concat(e.release.action,")"):""),to:{name:"PipelineReleaseLogs",params:{repoSource:e.repoSource,repoOwner:e.repoOwner,repoName:e.repoName,releaseID:e.releaseID}},active:!0},"succeeded"!==e.release.releaseStatus&&"failed"!==e.release.releaseStatus?e.periodicallyRefreshRelease(5):e.periodicallyRefreshRelease(18e3)})).catch((function(t){e.periodicallyRefreshRelease(30)}))},loadPipeline:function(){var e=this;this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName)).then((function(t){e.pipeline=t.data})).catch((function(e){console.warn(e)}))},periodicallyRefreshRelease:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadRelease,i))},sortLabels:function(e){return e?e.slice().sort((function(e,t){return e.key>t.key})):e}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,s.rn)("user",{user:"me"})),beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},T=P,j=(0,w.Z)(T,i,[],!1,null,null,null).exports},4940:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"col-12 text-center"},[r("log-navigation",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/releases/"+this.releaseID+"/alllogs",status:this.release.releaseStatus,logid:e.logid}})],1),e._v(" "),e.logid?r("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/releases/"+this.releaseID+"/logsbyid/"+this.logid,status:this.release.releaseStatus,"allow-tail":!1}}):"pending"===e.release.releaseStatus||"running"===e.release.releaseStatus||"canceling"===e.release.releaseStatus?r("log-viewer",{attrs:{"log-url":"/api/pipelines/"+this.repoSource+"/"+this.repoOwner+"/"+this.repoName+"/releases/"+this.releaseID+"/logs",status:this.release.releaseStatus,"allow-tail":!0}}):e._e()],1)};i._withStripped=!0;var s=r(1247),n=r(8167),a={components:{LogNavigation:s.Z,LogViewer:n.Z},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},releaseID:{type:String,default:null},logid:{type:String,default:null},release:{type:Object,default:null}}},o=(0,r(1900).Z)(a,i,[],!1,null,null,null).exports},1953:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-3"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-lg-3"},[r("release-target-selector",{attrs:{model:e.filter.target,"on-change":e.setTarget,pipeline:e.pipeline}})],1),e._v(" "),r("div",{staticClass:"col-7 col-lg-6 text-lg-center"},[r("status-filter",{attrs:{filter:e.filter}})],1),e._v(" "),r("div",{staticClass:"col-5 col-lg-3"},[r("pagination-compact",{staticClass:"float-right",attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}})],1)]),e._v(" "),r("div",{staticClass:"row-header"},[r("div",{staticClass:"col-2"},[e._v("\n      Target\n    ")]),e._v(" "),r("div",{staticClass:"col-2"},[e._v("\n      Version\n    ")]),e._v(" "),r("div",{staticClass:"col-2"},[e._v("\n      Status\n    ")]),e._v(" "),r("div",{staticClass:"col-2"},[e._v("\n      Released\n    ")]),e._v(" "),r("div",{staticClass:"col-2"},[e._v("\n      Triggered by\n    ")]),e._v(" "),e.user&&e.user.active?r("div",{staticClass:"col-2"},[e._v("\n      Actions\n    ")]):e._e()]),e._v(" "),e.releases.length>0?r("transition-group",{attrs:{name:"list-complete",tag:"div"}},e._l(e.releases,(function(t){return r("release-row",{key:t.id,attrs:{release:t,pipeline:e.pipeline}})})),1):e.loaded?r("div",{staticClass:"alert alert-warning text-center p-5"},[e._v("\n    There are no releases for the current filters. Please change your filters!\n  ")]):r("div",[r("spinner",{attrs:{color:"primary"}})],1),e._v(" "),e.releases.length>0?r("pagination",{attrs:{pagination:e.pagination,"link-generator":e.paginationLinkGenerator}}):e._e()],1)};i._withStripped=!0;var s=r(629),n=r(2061),a=r(2326),o=r(1820),l=r(5025),c=r(5106),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-input-group",{staticClass:"mb-3"},[r("b-input-group-prepend",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"is-text":"",title:"Filter pipelines based on when they're last built or released"}},[r("font-awesome-icon",{attrs:{icon:"upload"}})],1),e._v(" "),r("b-form-select",{attrs:{options:e.releaseTargetOptions},on:{change:e.onChange},model:{value:e.mutableModel,callback:function(t){e.mutableModel=t},expression:"mutableModel"}})],1)};u._withStripped=!0;var p=r(5343),d=r(6127),h=r(7754),f=r(8947),m=r(1436),b=r(7810);f.vI.add(m.cf$);var g={components:{BFormSelect:p.K,BInputGroup:d.w,BInputGroupPrepend:h.P,FontAwesomeIcon:b.GN},props:{model:{type:String,default:null},onChange:{type:Function,default:null},pipeline:{type:Object,default:null}},data:function(){return{mutableModel:this.model}},computed:{releaseTargetOptions:function(){var e=[{value:"all",text:"All release targets"}];return this.pipeline&&this.pipeline.releaseTargets&&this.pipeline.releaseTargets.forEach((function(t){e.push({value:t.name,text:t.name})})),e}}},v=r(1900),y=(0,v.Z)(g,u,[],!1,null,null,null).exports;function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={components:{Spinner:n.Z,Pagination:a.Z,StatusFilter:o.Z,ReleaseRow:l.Z,PaginationCompact:c.Z,ReleaseTargetSelector:y},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},query:{type:Object,default:null},pipeline:{type:Object,default:null}},data:function(){return{releases:[],pagination:{page:1,size:10,totalPages:0,totalItems:0},filter:{status:"all",target:"all"},loaded:!1,refresh:!0}},created:function(){this.filterDefaults=w({},this.filter),this.setDataFromQueryParams(this.query),this.$router.replace({query:this.getQueryParams()}).catch((function(){})),this.loadReleases()},methods:{paginationLinkGenerator:function(e){var t=this.getQueryParams();return e>0?t.page=e:t.page&&delete t.page,{query:t}},getQueryParams:function(){var e=w({},this.$route.query);return this.filter&&this.filter.status&&""!==this.filter.status?e.status=this.filter.status:e.status&&delete e.status,this.filter&&this.filter.target&&""!==this.filter.target?e.target=this.filter.target:e.target&&delete e.target,this.pagination&&this.pagination.page&&this.pagination.page>0?e.page=this.pagination.page:e.page&&delete e.page,e},setDataFromQueryParams:function(e){this.pagination.page=e&&e.page?Number.parseInt(e.page,10):1,this.filter.status=e&&e.status?e.status:this.filterDefaults.status,this.filter.target=e&&e.target?e.target:this.filterDefaults.target},updateQueryParams:function(){this.$router.push({query:this.getQueryParams()})},loadReleases:function(){var e=this,t="filter[status]=".concat(this.filter.status);"running"===this.filter.status&&(t+="&filter[status]=pending&filter[status]=canceling");var r="filter[target]=".concat(this.filter.target);this.axios.get("/api/pipelines/".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName,"/releases?").concat(t,"&").concat(r,"&page[number]=").concat(this.pagination.page,"&page[size]=").concat(this.pagination.size)).then((function(t){e.releases=t.data.items,e.pagination=t.data.pagination,e.loaded=!0})).catch((function(t){e.periodicallyRefreshRelease(15)}))},periodicallyRefreshRelease:function(e){this.refreshTimeout&&clearTimeout(this.refreshTimeout);var t=1e3*e*.75,r=1e3*e*1.25,i=Math.floor(Math.random()*(t-r+1)+r);this.refresh&&(this.refreshTimeout=setTimeout(this.loadReleases,i))},setTarget:function(e){this.filter.target=e,this.updateQueryParams()}},computed:w({},(0,s.rn)("user",{user:"me"})),watch:{$route:function(e,t){this.setDataFromQueryParams(e.query),this.loadReleases()},pipeline:{handler:function(e,t){this.loadReleases()},deep:!0}},beforeDestroy:function(){this.refresh=!1,this.refreshTimeout&&clearTimeout(this.refreshTimeout)}},x=(0,v.Z)(O,i,[],!1,null,"2d731a5c",null).exports},4391:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form",{staticClass:"rounded border bg-white p-3",attrs:{autocomplete:"off"},on:{submit:e.onSubmit}},[r("b-form-group",{attrs:{description:"Required for use as a Kubernetes secret."}},[r("b-form-checkbox",{attrs:{id:"base64"},model:{value:e.form.base64,callback:function(t){e.$set(e.form,"base64",t)},expression:"form.base64"}},[e._v("\n        Base64 encode\n      ")])],1),e._v(" "),e.showDoubleEncrypt?r("b-form-group",{attrs:{description:"To encrypt the secret envelope a second time for injecting it into Estafette's configmap."}},[r("b-form-checkbox",{attrs:{id:"double"},model:{value:e.form.double,callback:function(t){e.$set(e.form,"double",t)},expression:"form.double"}},[e._v("\n        Double encrypt\n      ")])],1):e._e(),e._v(" "),r("b-form-group",{attrs:{label:"Pipeline restriction regex","label-for":"pipelineAllowList",description:"The pipeline to restrict decryption of the secret for."}},[r("b-form-input",{attrs:{id:"pipelineAllowList",readonly:e.pipelineAllowListReadonly,type:"text"},model:{value:e.form.pipelineAllowList,callback:function(t){e.$set(e.form,"pipelineAllowList",t)},expression:"form.pipelineAllowList"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"Value to encrypt","label-for":"value",description:"The encrypted secret works only for this Estafette CI installation. Try to avoid newlines, this can cause errors during pipeline execution."}},[r("b-form-textarea",{staticClass:"border bg-light",attrs:{id:"value",placeholder:"Paste your value to be encrypted",rows:5},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1),e._v(" "),r("b-button",{staticClass:"mt-3",attrs:{type:"submit",variant:"primary"}},[e._v("\n      Encrypt\n    ")])],1),e._v(" "),e.encrypting?r("div",[r("spinner",{attrs:{color:"secondary"}})],1):e._e(),e._v(" "),e.secret?r("div",{staticClass:"mt-4"},[r("h5",[e._v("Use this in your manifest to hide secrets in plain sight!")]),e._v(" "),r("div",{staticClass:"pre-wrapper"},[r("pre",{staticClass:"bg-light p-3"},[r("code",[e._v(e._s(e.secret))])]),e._v(" "),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.click",modifiers:{click:!0}}],staticClass:"btn-clipboard",attrs:{title:"Copied!"},on:{click:e.copy}},[e._v("\n        Copy\n      ")])],1)]):e._e()],1)};i._withStripped=!0;var s=r(2061),n=r(4909),a=r(4951),o=r(2183),l=r(5302),c=r(4058),u=r(5193),p=r(8365),d={components:{spinner:s.Z,BForm:n.e,BFormCheckbox:a.l,BFormInput:o.e,BFormTextarea:l.y,BFormGroup:c.x,BButton:u.T},props:{repoSource:{type:String,default:null},repoOwner:{type:String,default:null},repoName:{type:String,default:null},pipeline:{type:Object,default:null}},directives:{BTooltip:p.T},data:function(){return{form:{base64:!1,double:!1,pipelineAllowList:null!==this.repoSource&&null!==this.repoOwner&&null!==this.repoName?"".concat(this.repoSource,"/").concat(this.repoOwner,"/").concat(this.repoName):".*",value:null},pipelineAllowListReadonly:"AdminSecrets"!==this.$route.name,showDoubleEncrypt:"AdminSecrets"===this.$route.name,encrypting:!1,secret:null}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),this.encrypting=!0,this.axios.post("/api/manifest/encrypt",this.form).then((function(e){t.encrypting=!1,t.secret=e.data.secret,window.scrollTo(0,document.body.scrollHeight)})).catch((function(e){t.encrypting=!1,console.warn(e)}))},copy:function(){var e=document.createElement("textarea");e.value=this.secret,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}},h=(0,r(1900).Z)(d,i,[],!1,null,"6ec86454",null).exports},7875:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-3"},[r("div",{staticClass:"container-fluid text-center p-5"},[r("div",{staticClass:"row d-flex justify-content-center"},[r("div",{class:["rounded border border-warning m-3 p-4 d-inline-flex align-items-center trigger-block bg-white"]},[r("div",[r("h6",[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"code-branch"}}),e._v(" "),r("a",{staticClass:"text-body",attrs:{href:"https://"+e.pipeline.repoSource+"/"+e.pipeline.repoOwner+"/"+e.pipeline.repoName,target:"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n              "+e._s(e.pipeline.repoSource)+"/"+e._s(e.pipeline.repoOwner)+"/"+e._s(e.pipeline.repoName)+" *\n            ")])],1),e._v(" "),e._m(0),e._v(" "),e._m(1)])]),e._v(" "),e._l(e.pipeline.triggers,(function(t,i){return r("div",{key:i,class:["rounded border border-warning m-3 p-4 d-inline-flex align-items-center trigger-block bg-white"]},[t.pipeline?r("div",[r("h6",[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"tools"}}),e._v("\n            "+e._s(t.pipeline.name)+"\n          ")],1),e._v(" "),r("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            branch\n            "),r("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.pipeline.branch)+"\n            ")])]),e._v(" "),r("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            event\n            "),r("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.pipeline.event)+"\n            ")])]),e._v(" "),r("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            status\n            "),r("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.pipeline.status)+"\n            ")])])]):e._e(),e._v(" "),t.release?r("div",[r("h6",[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"upload"}}),e._v("\n            "+e._s(t.release.name)+"\n          ")],1),e._v(" "),r("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            target\n            "),r("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.release.target)+"\n            ")])]),e._v(" "),r("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            event\n            "),r("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.release.event)+"\n            ")])]),e._v(" "),r("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            status\n            "),r("span",{staticClass:"badge badge-warning"},[e._v("\n              "+e._s(t.release.status)+"\n            ")])])]):e._e(),e._v(" "),t.git?r("div",[r("h6",[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"code-branch"}}),e._v(" "),r("a",{staticClass:"text-body",attrs:{href:"https://"+t.git.repository,target:"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n              "+e._s(t.git.repository)+"\n            ")])],1)]):e._e(),e._v(" "),t.pubsub?r("div",[r("h6",[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"bezier-curve"}}),e._v("\n            projects/"+e._s(t.pubsub.project)+"/topics/"+e._s(t.pubsub.topic)+"\n          ")],1)]):e._e(),e._v(" "),t.docker?r("div"):e._e(),e._v(" "),t.cron?r("div",[r("h6",[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"clock"}}),e._v("\n            "+e._s(t.cron.schedule)+"\n          ")],1)]):e._e()])}))],2),e._v(" "),r("div",{staticClass:"row d-flex justify-content-center"},[r("div",{class:["rounded border border-primary m-3 p-5 d-inline-flex align-items-center pipeline-block bg-white"]},[r("div",[r("h6",[r("font-awesome-icon",{staticClass:"triggered-by-icon",attrs:{icon:"industry"}}),e._v("\n            "+e._s(e.pipeline.repoSource)+"/"+e._s(e.pipeline.repoOwner)+"/"+e._s(e.pipeline.repoName)+"\n          ")],1)])])]),e._v(" "),e._m(2)])])};i._withStripped=!0;var s=r(8947),n=r(1436),a=r(7810);s.vI.add(n.o4t,n.CgH,n.cf$,n.m08,n.SZw,n.mh3,n.jPh,n.izv);var o={components:{FontAwesomeIcon:a.GN},props:{pipeline:{type:Object,default:null}}},l=(0,r(1900).Z)(o,i,[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            event\n            "),r("span",{staticClass:"badge badge-warning"},[e._v("\n              push\n            ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"btn btn-light btn-sm mr-1"},[e._v("\n            branch\n            "),r("span",{staticClass:"badge badge-warning"},[e._v("\n              any\n            ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alert alert-light text-center m-5 p-4"},[r("div",[e._v("\n        * pipelines automatically trigger on git push; if you want to trigger on other events have a look at the "),r("a",{attrs:{href:"https://estafette.io/usage/manifest/#triggers",target:"_blank"}},[e._v("\n          documentation\n        ")]),e._v(" on how to start using triggers.\n      ")])])}],!1,null,"663f3b08",null).exports},5513:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section-header"),e._v(" "),r("inner-navigation-tabs",{attrs:{"section-route-name":"Pipelines"}}),e._v(" "),r("router-view")],1)};i._withStripped=!0;var s=r(9367),n=r(4740),a={components:{SectionHeader:s.Z,InnerNavigationTabs:n.Z}},o=(0,r(1900).Z)(a,i,[],!1,null,null,null).exports}}]);