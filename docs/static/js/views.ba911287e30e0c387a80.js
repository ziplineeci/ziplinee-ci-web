"use strict";(self.webpackChunkestafette_ci_web=self.webpackChunkestafette_ci_web||[]).push([[199],{4740:function(t,e,n){n.d(e,{Z:function(){return g}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-nav",{staticClass:"m-3 d-none d-lg-flex",attrs:{tabs:""}},t._l(t.routes,(function(e){return n("b-nav-item",{key:e.name,class:e.meta&&e.meta.class?e.meta.class:"",attrs:{to:{name:e.name},exact:!!e.meta&&e.meta.exact}},[e.meta&&e.meta.icon?n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:e.meta?e.meta.icon:""}}):t._e(),t._v(" "),n("span",[t._v("\n        "+t._s(e.meta&&e.meta.text?e.meta.text:e.name)+"\n      ")])],1)})),1),t._v(" "),n("b-dropdown",{staticClass:"m-3 d-lg-none",attrs:{variant:t.variant,block:"","menu-class":"w-100"},scopedSlots:t._u([{key:"button-content",fn:function(){return[t.activeRouteIcon?n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:t.activeRouteIcon}}):t._e(),t._v("\n      "+t._s(t.activeRouteText)+"\n    ")]},proxy:!0}])},[t._v(" "),t._l(t.routes,(function(e){return n("b-dropdown-item",{key:e.name,class:e.meta&&e.meta.class?e.meta.class:"",attrs:{to:{name:e.name},exact:!!e.meta&&e.meta.exact}},[e.meta&&e.meta.icon?n("font-awesome-icon",{staticClass:"dropdown-icon",attrs:{icon:e.meta?e.meta.icon:""}}):t._e(),t._v(" "),n("span",[t._v("\n        "+t._s(e.meta&&e.meta.text?e.meta.text:e.name)+"\n      ")])],1)}))],2)],1)};a._withStripped=!0;var i=n(629),r=n(9027),o=n(2450),s=n(5189),l=n(7379),u=n(8947),c=n(1436),m=n(7810);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}u.vI.add(c.DD4,c.U7t,c.ILF,c.FVb,c.Hw7,c.Kak,c.NkB,c.neB,c.BC0,c.E9T,c.OS1,c.nFo,c.Stf,c.m6i,c.Gg,c.jPh,c.CgH,c.cf$,c.VE0,c.o4t,c.X8G,c.BC0,c.Mm7,c.FL8,c.bJI,c.oso,c.a3n);var v={components:{BNav:r.O,BNavItem:o.r,BDropdown:s.R,BDropdownItem:l.E,FontAwesomeIcon:m.GN},props:{sectionRouteName:{type:String,default:null}},methods:{isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)}},computed:p(p({},(0,i.rn)("user",{user:"me"})),{},{routes:function(){var t=this,e=this.$route.matched[0].name,n=this.$router.options.routes.find((function(t){return t.name===e}));return n&&n.children?n.children.filter((function(e){return(!e.meta||!e.meta.hide)&&(!!(t.user&&t.user.active||e.meta&&e.meta.allowedWithoutAuth)&&!(e.meta&&e.meta.requiredRole&&!(t.user&&t.user.active&&t.user.roles&&t.user.roles.includes(e.meta.requiredRole))))})):[]},activeRouteText:function(){return this.$route.meta&&this.$route.meta.text?this.$route.meta.text:this.$route.name},activeRouteIcon:function(){if(this.$route.meta&&this.$route.meta.icon)return this.$route.meta.icon},section:function(){var t=this.$route.matched[0].name;return this.sectionRouteName&&(t=this.sectionRouteName),this.$router.options.routes.find((function(e){return e.name===t}))},variant:function(){var t=this.section;return t&&t.meta&&t.meta.variant?t.meta.variant:"secondary"}})},g=(0,n(1900).Z)(v,a,[],!1,null,null,null).exports},2326:function(t,e,n){n.d(e,{Z:function(){return s}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.linkGenerator?n("b-pagination-nav",{attrs:{"number-of-pages":t.pagination.totalPages>0?t.pagination.totalPages:1,"link-gen":t.linkGenerator,"use-router":"",size:"md","hide-goto-end-buttons":"",align:"center"}}):n("b-pagination",{attrs:{"total-rows":t.pagination.totalItems,"per-page":t.pagination.size,size:"md","hide-goto-end-buttons":"",align:"center"},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)};a._withStripped=!0;var i=n(6918),r=n(962),o={components:{BPaginationNav:i.a,BPagination:r.c},props:{pagination:{type:Object,default:null},linkGenerator:{type:Function,default:null}}},s=(0,n(1900).Z)(o,a,[],!1,null,null,null).exports},9367:function(t,e,n){n.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.section?n("b-jumbotron",{staticClass:"section-header",attrs:{header:t.header,"bg-variant":t.bgVariant,"text-variant":t.textVariant,"header-level":"4","container-fluid":"",fluid:""}}):t._e()};a._withStripped=!0;var i=n(629);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={components:{BJumbotron:n(9406).M},props:{sectionRouteName:{type:String,default:null}},methods:{isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)}},computed:o(o({},(0,i.rn)("user",{user:"me"})),{},{section:function(){var t=this.$route.matched[0].name;return this.sectionRouteName&&(t=this.sectionRouteName),this.$router.options.routes.find((function(e){return e.name===t}))},header:function(){var t=this.section;return t?t.meta&&t.meta.text?t.meta.text:t.name:""},bgVariant:function(){var t=this.section;return t&&t.meta&&t.meta.variant?t.meta.variant:"secondary"},textVariant:function(){var t=this.section;return t&&t.meta&&t.meta.variant&&"warning"===t.meta.variant?"dark":"white"}})},u=(0,n(1900).Z)(l,a,[],!1,null,null,null).exports},7814:function(t,e,n){n.r(e),n.d(e,{default:function(){return j}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"migrations"},[n("b-jumbotron",{staticClass:"section-header",attrs:{header:"Migrations","bg-variant":"secondary","text-variant":"light","header-level":"4","container-fluid":"",fluid:""}}),t._v(" "),n("div",{staticClass:"details"},[n("div",{staticClass:"row justify-content-between"},[n("div",{staticClass:"col-6 text-left"},[n("b-form",{staticClass:"d-flex",attrs:{autocomplete:"off"}},[n("b-input-group",{staticClass:"mb-3"},[n("b-input-group-prepend",{attrs:{"is-text":""}},[n("font-awesome-icon",{attrs:{icon:"check-circle"}})],1),t._v(" "),t.statusOptions.length>0?n("b-form-select",{attrs:{id:"filter-select",options:t.statusOptions},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}}):t._e()],1),t._v(" "),n("b-input-group",{staticClass:"ml-3 mb-3"},[n("b-input-group-prepend",{attrs:{"is-text":""}},[n("font-awesome-icon",{attrs:{icon:"tasks"}})],1),t._v(" "),t.stepOptions.length>0?n("b-form-select",{attrs:{id:"filter-select",options:t.stepOptions},model:{value:t.filter.lastStep,callback:function(e){t.$set(t.filter,"lastStep",e)},expression:"filter.lastStep"}}):t._e()],1)],1)],1),t._v(" "),n("div",{staticClass:"col-3 text-right"},[n("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.pagination.totalItems,"per-page":100,align:"fill",size:"sm"},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)]),t._v(" "),n("b-table",{ref:"migrations",attrs:{items:t.taskProvider,filter:t.filter,fields:t.fields,"per-page":t.pagination.size,"current-page":t.pagination.page,"sort-icon-left":"",striped:"",hover:"",borderless:"",stacked:"lg"},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[n("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:{variant:"primary",content:e.value,placement:"right"},expression:"{ variant: 'primary', content: data.value, placement: 'right' }",modifiers:{hover:!0}}]},[t._v("\n          ..."+t._s(e.value.substring(e.value.length-3))+"\n        ")])]}},{key:"cell(migration)",fn:function(e){return[n("a",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:{variant:"light",content:e.item.fromSource+"/"+e.item.fromOwner+"/"+e.item.fromName+" ➞ "+e.item.toSource+"/"+e.item.toOwner+"/"+e.item.toName,placement:"right"},expression:"{ variant: 'light', content: `${data.item.fromSource}/${data.item.fromOwner}/${data.item.fromName} ➞ ${data.item.toSource}/${data.item.toOwner}/${data.item.toName}`, placement: 'right' }",modifiers:{hover:!0}}],attrs:{href:"/pipelines/"+e.item.toSource+"/"+e.item.toOwner+"/"+e.item.toName+"/overview"}},[t._v("\n          "+t._s(e.value)+"\n        ")])]}},{key:"cell(status)",fn:function(e){return[n("div",{class:t.statusClass(e.value),staticStyle:{display:"inline-block","min-width":"18px"}},[n("font-awesome-icon",{attrs:{icon:(t.statusOptions.find((function(t){return t.value===e.value}))||{icon:"none"}).icon}})],1),t._v("\n        "+t._s((t.statusOptions.find((function(t){return t.value===e.value}))||{text:e.value}).text)+"\n      ")]}},{key:"cell(lastStep)",fn:function(e){return[n("span",{class:t.stepClass(e.value)},[t._v("\n          "+t._s((t.stepOptions.find((function(t){return t.value===e.value}))||{text:e.value}).text)+"\n        ")])]}},{key:"cell(errorDetails)",fn:function(e){return[e.value?n("b-button",{attrs:{variant:"outline-danger"},on:{click:function(n){return t.showErrorDetails(e.item)}}},[n("font-awesome-icon",{attrs:{icon:"exclamation"}})],1):t._e(),t._v(" "),e.value?t._e():n("span",[t._v("\n          -\n        ")])]}}])}),t._v(" "),t.pagination.totalItems>0?n("pagination",{attrs:{pagination:t.pagination}}):t._e()],1)],1)};a._withStripped=!0;var i=n(538),r=n(3659),o=n(2706),s=n(3525),l=n(962),u=n(9406),c=n(4909),m=n(6127),d=n(7754),p=n(5343),f=n(5193),v=n(2326),g=n(8947),b=n(1436),h=n(7810),_=n(381),x=n.n(_);g.vI.add(b.f8k,b.A8,b.yr5,b.LM3,b.f8k,b.nYk,b.gPx,b.WV2),i.Z.directive("b-popover",r.L),i.Z.use(o.k);var w={components:{BTable:s.h,BPagination:l.c,Pagination:v.Z,BJumbotron:u.M,BForm:c.e,BInputGroup:m.w,BInputGroupPrepend:d.P,BFormSelect:p.K,BButton:f.T,FontAwesomeIcon:h.GN},data:function(){var t=this;return{selected:null,users:[],statusOptions:y,stepOptions:O,filter:{},pagination:{page:1,size:100,totalPages:0,totalItems:0},fields:[{key:"id",label:"ID"},{key:"migration",label:"Migration",formatter:function(t,e,n){return n.fromName!==n.toName?"".concat(n.fromName," ➞ ").concat(n.toName):n.toName}},{key:"status",label:"Status"},{key:"lastStep",label:"Last Step"},{key:"errorDetails",label:"Error",class:"text-center"},{key:"totalDuration",label:"Duration"},{key:"updatedAt",label:"Updated At",sortable:!0,formatter:function(e,n,a){return t.$options.filters.formatDatetime(e)}}],loaded:{migrations:!1}}},methods:{taskProvider:function(t){var e=this;console.info("ctx",t);var n=100*(t.currentPage-1);if(this.migrations){var a=this.migrations.filter((function(t){return(!e.filter.status||e.filter.status===t.status)&&(!e.filter.lastStep||e.filter.lastStep===t.lastStep)}));return this.updatePagination(t,a),a.sort((function(e,n){return t.sortDesc?e[t.sortBy]<n[t.sortBy]?1:-1:e[t.sortBy]>n[t.sortBy]?1:-1})),a.slice(n,n+100)}return this.axios.get("/api/migrations").then((function(t){return e.migrations=t.data.map((function(t){return t.totalDuration=x().duration(t.totalDuration/1e3/1e3,"ms").humanize(),t.updatedAt=new Date(t.updatedAt),t})),e.loaded.migrations=!0,e.pagination={page:1,size:100,totalPages:e.migrations.length/100,totalItems:e.migrations.length},e.migrations.slice(n,n+100)}))},updatePagination:function(t,e){this.pagination.totalPages=e.length/100,this.pagination.totalItems=e.length},statusClass:function(t){switch(t){case"completed":return"text-success";case"in_progress":return"ckw";case"failed":return"text-danger";case"cancelled":return"text-warning"}return""},stepClass:function(t){return t.indexOf("failed")>-1?"text-danger":""},showErrorDetails:function(t){var e=(0,this.$createElement)("pre",{domProps:{innerHTML:t.errorDetails}});this.$bvModal.msgBoxOk(e,{title:"Error Details",size:"xl",buttonSize:"md",okVariant:"secondary",headerClass:"p-2 border-bottom-0 m-auto",footerClass:"p-2 border-top-0 m-auto",centered:!0})}},computed:{ready:function(){for(var t in this.loaded)if(!this.loaded[t])return!1;return!0}}},y=[{value:"",text:"-- Unset --"},{value:"queued",text:"Queued",icon:"hourglass-start"},{value:"in_progress",text:"In Progress",icon:"spinner"},{value:"completed",text:"Completed",icon:"check-circle"},{value:"failed",text:"Failed",icon:"times-circle"},{value:"cancelled",text:"Cancelled",icon:"ban"}],O=[{value:"",text:"-- Unset --"},{value:"waiting",text:"Waiting"},{value:"releases_failed",text:"Releases Failed"},{value:"releases_done",text:"Releases Done"},{value:"release_logs_failed",text:"Release Logs Failed"},{value:"release_logs_done",text:"Release Logs Done"},{value:"release_log_objects_failed",text:"Release Log Objects Failed"},{value:"release_log_objects_done",text:"Release Log Objects Done"},{value:"builds_failed",text:"Builds Failed"},{value:"builds_done",text:"Builds Done"},{value:"build_logs_failed",text:"Build Logs Failed"},{value:"build_logs_done",text:"Build Logs Done"},{value:"build_log_objects_failed",text:"Build Log Objects Failed"},{value:"build_log_objects_done",text:"Build Log Objects Done"},{value:"build_versions_failed",text:"Build Versions Failed"},{value:"build_versions_done",text:"Build Versions Done"},{value:"computed_tables_failed",text:"Computed Tables Failed"},{value:"computed_tables_done",text:"Computed Tables Done"},{value:"callback_failed",text:"Callback Failed"},{value:"callback_done",text:"Callback Done"},{value:"completion_failed",text:"Completion Failed"},{value:"completion_done",text:"Completion Done"}],k=w,j=(0,n(1900).Z)(k,a,[],!1,null,null,null).exports},9576:function(t,e,n){n.r(e),n.d(e,{default:function(){return s}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section-header"),t._v(" "),n("inner-navigation-tabs"),t._v(" "),n("div",{staticClass:"m-3"},[n("router-view")],1)],1)};a._withStripped=!0;var i=n(4740),r=n(9367),o={components:{InnerNavigationTabs:i.Z,SectionHeader:r.Z}},s=(0,n(1900).Z)(o,a,[],!1,null,null,null).exports}}]);